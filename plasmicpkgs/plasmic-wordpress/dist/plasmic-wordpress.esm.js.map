{"version":3,"file":"plasmic-wordpress.esm.js","sources":["../src/utils.ts","../src/wordpress.tsx","../src/index.tsx"],"sourcesContent":["export const queryOperators = [\n    {\n        value: \"search\",\n        label: 'Search'\n    },\n    {\n        value: \"slug\",\n        label: 'Filter by Slug'\n    }, {\n        value: \"author\",\n        label: 'Filter by author'\n    },\n\n]","import {\n  ComponentMeta,\n  DataProvider,\n  GlobalContextMeta,\n  repeatedElement,\n  useSelector,\n} from \"@plasmicapp/host\";\nimport { usePlasmicQueryData } from \"@plasmicapp/query\";\nimport get from \"dlv\";\nimport React, { ReactNode, useContext } from \"react\";\nimport { queryOperators } from \"./utils\";\n\nexport function ensure<T>(x: T | null | undefined): T {\n  if (x === null || x === undefined) {\n    debugger;\n    throw new Error(`Value must not be undefined or null`);\n  } else {\n    return x;\n  }\n}\n\nconst modulePath = \"@plasmicpkgs/plasmic-wordpress\";\n\ninterface WordpressProviderProps {\n  wordpressUrl?: string;\n}\n\nconst CredentialsContext =\n  React.createContext<WordpressProviderProps | undefined>(undefined);\n\nexport const WordpressProviderMeta: GlobalContextMeta<WordpressProviderProps> =\n  {\n    name: \"WordpressProvider\",\n    displayName: \"Wordpress Provider\",\n    description: \"The endpoint of your Wordpress\",\n    importName: \"WordpressProvider\",\n    importPath: modulePath,\n    props: {\n      wordpressUrl: {\n        type: \"string\",\n        displayName: \"Wordpress URL\",\n        description: \"URL of your Wordpress \",\n        defaultValue: \"https://techcrunch.com/\",\n      },\n    },\n  };\n\nexport function WordpressProvider({\n  wordpressUrl,\n  children,\n}: React.PropsWithChildren<WordpressProviderProps>) {\n  return (\n    <CredentialsContext.Provider value={{ wordpressUrl }}>\n      {children}\n    </CredentialsContext.Provider>\n  );\n}\n\ninterface WordpressFetcherProps {\n  children?: ReactNode;\n  className?: string;\n  noLayout?: boolean;\n  queryType?: string;\n  noAutoRepeat?: boolean;\n  limit?: number;\n  queryOperator?: string;\n  filterValue?: string;\n  setControlContextData?: (data: {\n    posts?: { value: string; label: string }[];\n    pages?: { value: string; label: string }[];\n  }) => void;\n}\n\nexport const WordpressFetcherMeta: ComponentMeta<WordpressFetcherProps> = {\n  name: \"WordpressFetcher\",\n  displayName: \"Wordpress Fetcher\",\n  importName: \"WordpressFetcher\",\n  importPath: modulePath,\n  providesData: true,\n  description:\n    \"Fetches Wordpress data and repeats content of children once for every row fetched. \",\n  defaultStyles: {\n    display: \"grid\",\n    gridTemplateColumns: \"1fr\",\n    gridRowGap: \"8px\",\n    padding: \"8px\",\n    maxWidth: \"100%\",\n  },\n  props: {\n    children: {\n      type: \"slot\",\n      defaultValue: {\n        type: \"vbox\",\n        styles: {\n          padding: \"8px\",\n        },\n        children: {\n          type: \"component\",\n          name: \"WordpressField\",\n        },\n      },\n    },\n    queryType: {\n      type: \"choice\",\n      options: [\"posts\", \"pages\"],\n    },\n    queryOperator: {\n      type: \"choice\",\n      displayName: \"Query Operator\",\n      description: \"Filter Parameter filter by\",\n      options: (props, ctx) => {\n        return queryOperators.map((item: any) => ({\n          label: item?.label,\n          value: item?.value,\n        }));\n      },\n      hidden: (props, ctx) => !props.queryType,\n    },\n\n    filterValue: {\n      type: \"string\",\n      displayName: \"Filter value\",\n      description: \"Value to filter\",\n      hidden: (props, ctx) => !props.queryOperator,\n    },\n    limit: {\n      type: \"number\",\n      displayName: \"Limit\",\n      description: \"Limit\",\n    },\n    noAutoRepeat: {\n      type: \"boolean\",\n      displayName: \"No auto-repeat\",\n      description:\n        \"Do not automatically repeat children for every posts or pages.\",\n      defaultValue: false,\n    },\n    noLayout: {\n      type: \"boolean\",\n      displayName: \"No layout\",\n      description:\n        \"When set, Wordpress Fetcher will not layout its children; instead, the layout set on its parent element will be used. Useful if you want to set flex gap or control container tag type.\",\n      defaultValue: false,\n    },\n  },\n};\n\nexport function WordpressFetcher({\n  queryOperator,\n  filterValue,\n  noAutoRepeat,\n  limit,\n  queryType,\n  children,\n  className,\n  noLayout,\n  setControlContextData,\n}: WordpressFetcherProps) {\n  const creds = ensure(useContext(CredentialsContext));\n  const cacheKey = JSON.stringify({\n    queryOperator,\n    filterValue,\n    limit,\n    queryType,\n    creds,\n  });\n\n  const { data: posts } = usePlasmicQueryData<any | null>(\n    queryType === \"posts\" ? `${cacheKey}/posts` : null,\n    async () => {\n      const url = `${creds.wordpressUrl}/wp-json/wp/v2/posts`;\n      let query;\n      if (limit) {\n        query = `${url}?per_page=${limit}`;\n      } else {\n        query = url;\n      }\n\n      const resp = await fetch(query);\n      return await resp.json();\n    }\n  );\n\n  const { data: pages } = usePlasmicQueryData<any | null>(\n    queryType === \"pages\" ? `${cacheKey}/pages` : null,\n    async () => {\n      const url = `${creds.wordpressUrl}/wp-json/wp/v2/pages`;\n      let query;\n      if (limit) {\n        query = `${url}?per_page=${limit}`;\n      } else {\n        query = url;\n      }\n\n      const resp = await fetch(query);\n      return await resp.json();\n    }\n  );\n  \n  setControlContextData?.({\n    posts: posts?.map((post: any) => ({ value: post.id, label: post.slug })),\n    pages: pages?.map((page: any) => ({ value: page.id, label: page.slug })),\n  });\n\n  const { data: filteredPages } = usePlasmicQueryData<any | null>(\n    queryType === \"pages\" && queryOperator && filterValue\n      ? `${cacheKey}/pages/filtered`\n      : null,\n    async () => {\n      const url = `${creds.wordpressUrl}/wp-json/wp/v2/pages?${queryOperator}=${filterValue}`;\n      let query;\n      if (limit) {\n        query = `${url}&per_page=${limit}`;\n      } else {\n        query = url;\n      }\n\n      const resp = await fetch(query);\n      return await resp.json();\n    }\n  );\n  const { data: filteredPosts } = usePlasmicQueryData<any | null>(\n    queryType === \"posts\" && queryOperator && filterValue\n      ? `${cacheKey}/posts/filtered`\n      : null,\n    async () => {\n      const url = `${creds.wordpressUrl}/wp-json/wp/v2/posts?${queryOperator}=${filterValue}`;\n      let query;\n      if (limit) {\n        query = `${url}&per_page=${limit}`;\n      } else {\n        query = url;\n      }\n\n      const resp = await fetch(query);\n      return await resp.json();\n    }\n  );\n\n  if (!queryType) {\n    return <div>Please specify query type</div>;\n  }\n\n  if (queryOperator && !filterValue) {\n    return <div>Please specify Filter Value</div>;\n  }\n  if (!queryOperator && filterValue) {\n    return <div>Please specify Query Operator</div>;\n  }\n\n  let renderedData;\n\n  if (queryType === \"posts\" && posts && !filteredPosts) {\n    renderedData = noAutoRepeat\n      ? children\n      : posts?.map((post: any, i: number) => (\n          <DataProvider\n            key={post.id}\n            name={\"wordpressItem\"}\n            data={post}\n            hidden={true}\n          >\n            <DataProvider name={\"currentWordpressPost\"} data={post}>\n              {repeatedElement(i, children)}\n            </DataProvider>\n          </DataProvider>\n        ));\n  } else if (queryType === \"pages\" && pages && !filteredPages) {\n    renderedData = noAutoRepeat\n      ? children\n      : pages?.map((page: any, i: number) => (\n          <DataProvider\n            key={page.id}\n            name={\"wordpressItem\"}\n            data={page}\n            hidden={true}\n          >\n            <DataProvider name={\"currentWordpressPage\"} data={page}>\n              {repeatedElement(i, children)}\n            </DataProvider>\n          </DataProvider>\n        ));\n  } else if (queryType === \"pages\" && filteredPages) {\n    if (!filteredPages && queryOperator === \"pages\") {\n      return <div>Please make sure queryType is pages</div>;\n    }\n    if (filteredPages.length === 0) {\n      return <div>No published pages found</div>;\n    }\n    renderedData = noAutoRepeat\n      ? children\n      : filteredPages?.map((page: any, i: number) => (\n          <DataProvider\n            key={page.id}\n            name={\"wordpressItem\"}\n            data={page}\n            hidden={true}\n          >\n            <DataProvider name={\"currentWordpressPage\"} data={page}>\n              {repeatedElement(i, children)}\n            </DataProvider>\n          </DataProvider>\n        ));\n  } else if (queryType === \"posts\" && filteredPosts) {\n    if (!filteredPosts && queryOperator === \"posts\") {\n      return <div>Please make sure queryType is posts</div>;\n    }\n\n    if (filteredPosts.length === 0) {\n      return <div>No published posts found</div>;\n    }\n\n    renderedData = filteredPosts?.map((page: any, i: number) => (\n      <DataProvider\n        key={page.id}\n        name={\"wordpressItem\"}\n        data={page}\n        hidden={true}\n      >\n        <DataProvider name={\"currentWordpressPost\"} data={page}>\n          {repeatedElement(i, children)}\n        </DataProvider>\n      </DataProvider>\n    ));\n  } else {\n    return <div>Please choose the Query Type in order to render the data</div>;\n  }\n\n  const response = [pages, posts];\n  return (\n    <DataProvider data={response} name=\"wordpressItems\">\n      {noLayout ? (\n        <> {renderedData} </>\n      ) : (\n        <div className={className}> {renderedData} </div>\n      )}\n    </DataProvider>\n  );\n}\n\ninterface WordpressFieldProps {\n  className?: string;\n  field?: string;\n  setControlContextData?: (data: { data: any }) => void;\n}\nexport const WordpressFieldMeta: ComponentMeta<WordpressFieldProps> = {\n  name: \"WordpressField\",\n  displayName: \"Wordpress Field\",\n  importName: \"WordpressField\",\n  importPath: modulePath,\n  props: {\n    field: {\n      type: \"choice\",\n      options: [\n        \"title\",\n        \"slug\",\n        \"content\",\n        \"excerpt\",\n        \"date\",\n        \"modified\",\n        \"link\",\n        \"status\",\n      ],\n      displayName: \"Field\",\n      description: \"Field to be displayed.\",\n    },\n  },\n};\nexport function WordpressField({\n  className,\n  field,\n  setControlContextData,\n}: WordpressFieldProps) {\n  const item = useSelector(\"wordpressItem\");\n\n  if (!item) {\n    return <div>WordpressField must be used within a WordpressFetcher </div>;\n  }\n\n  setControlContextData?.({\n    data: item,\n  });\n\n  if (!field) {\n    return <div>Please specify a valid path or select a field.</div>;\n  }\n\n  const data = get(item, field as string);\n\n  if (typeof data === \"object\" && \"rendered\" in data) {\n    return (\n      <div\n        className={className}\n        style={{ whiteSpace: \"normal\" }}\n        dangerouslySetInnerHTML={{ __html: data.rendered }}\n      />\n    );\n  } else if (!data || typeof data === \"object\") {\n    return <div className={className}>Please specify a valid field.</div>;\n  } else {\n    return <div className={className}> {data} </div>;\n  }\n}\n","import registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport registerGlobalContext from \"@plasmicapp/host/registerGlobalContext\";\nimport {\n  WordpressFetcher,\n  WordpressFetcherMeta,\n  WordpressField,\n  WordpressFieldMeta,\n  WordpressProvider,\n  WordpressProviderMeta,\n} from \"./wordpress\";\n\nexport function registerAll(loader?: {\n  registerComponent: typeof registerComponent;\n  registerGlobalContext: typeof registerGlobalContext;\n}) {\n  const _registerComponent = <T extends React.ComponentType<any>>(\n    Component: T,\n    defaultMeta: ComponentMeta<React.ComponentProps<T>>\n  ) => {\n    if (loader) {\n      loader.registerComponent(Component, defaultMeta);\n    } else {\n      registerComponent(Component, defaultMeta);\n    }\n  };\n\n  if (loader) {\n    loader.registerGlobalContext(WordpressProvider, WordpressProviderMeta);\n  } else {\n    registerGlobalContext(WordpressProvider, WordpressProviderMeta);\n  }\n\n  _registerComponent(WordpressFetcher, WordpressFetcherMeta);\n  _registerComponent(WordpressField, WordpressFieldMeta);\n}\n\nexport * from \"./wordpress\";\n"],"names":["queryOperators","value","label","ensure","x","undefined","Error","modulePath","CredentialsContext","React","createContext","WordpressProviderMeta","name","displayName","description","importName","importPath","props","wordpressUrl","type","defaultValue","WordpressProvider","_ref","children","Provider","WordpressFetcherMeta","providesData","defaultStyles","display","gridTemplateColumns","gridRowGap","padding","maxWidth","styles","queryType","options","queryOperator","ctx","map","item","hidden","filterValue","limit","noAutoRepeat","noLayout","WordpressFetcher","_ref2","className","setControlContextData","creds","useContext","cacheKey","JSON","stringify","_usePlasmicQueryData","usePlasmicQueryData","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","query","resp","wrap","_callee$","_context","prev","next","fetch","sent","json","abrupt","stop","posts","data","_usePlasmicQueryData2","_callee2","_callee2$","_context2","pages","post","id","slug","page","_usePlasmicQueryData3","_callee3","_callee3$","_context3","filteredPages","_usePlasmicQueryData4","_callee4","_callee4$","_context4","filteredPosts","renderedData","i","DataProvider","key","repeatedElement","length","response","WordpressFieldMeta","field","WordpressField","_ref7","useSelector","get","style","whiteSpace","dangerouslySetInnerHTML","__html","rendered","registerAll","loader","_registerComponent","Component","defaultMeta","registerComponent","registerGlobalContext"],"mappings":"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"}