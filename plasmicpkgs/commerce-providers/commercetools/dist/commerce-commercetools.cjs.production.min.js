"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("@plasmicapp/host/registerGlobalContext")),r=require("@plasmicapp/query"),n=require("@plasmicpkgs/commerce"),o=require("react"),a=e(o),i=e(require("js-cookie")),u=e(require("debounce")),c=require("@commercetools/platform-sdk"),s=require("@commercetools/sdk-client-v2");function l(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,u,"next",e)}function u(e){l(a,n,o,i,u,"throw",e)}i(void 0)}))}}function p(){return(p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function d(){d=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=Object.create((t&&t.prototype instanceof y?t:y).prototype),i=new P(n||[]);return o(a,"_invoke",{value:j(e,r,i)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",v="executing",h="completed",m={};function y(){}function b(){}function g(){}var w={};s(w,i,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(S([])));k&&k!==r&&n.call(k,i)&&(w=k);var O=g.prototype=y.prototype=Object.create(w);function I(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function q(e,t){function r(o,a,i,u){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=p;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=C(u,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function C(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function S(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},I(q.prototype),s(q.prototype,u,(function(){return this})),t.AsyncIterator=q,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new q(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},I(O),s(O,c,"Generator"),s(O,i,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=S,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:S(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}var v=function(e,t){var r=void 0;switch(e){case"price-asc":r="price asc";break;case"price-desc":r="price desc";break;case"trending-desc":r=void 0;break;case"latest-desc":r="createdAt desc"}return r},h={expires:30,sameSite:"none",secure:!0},m=function(e){return i.set("commercetools_cart",JSON.stringify(e),h)},y=function(){return i.remove("commercetools_cart")},b=function(){var e=f(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={currency:"USD",country:"US"},e.next=3,t({query:"carts",method:"post",body:r});case 3:return(n=e.sent).body?m(n.body.id):y(),e.abrupt("return",n.body);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=f(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=(o=i.get("commercetools_cart"))?JSON.parse(o):void 0)){e.next=7;break}return e.next=4,t({query:"carts",method:"get",variables:{id:r}});case 4:n=e.sent.body,e.next=10;break;case 7:return e.next=9,b(t);case 9:n=e.sent;case 10:return n?m(n.id):y(),e.abrupt("return",n);case 12:case"end":return e.stop()}var o}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e,t){return e&&t?t in e?e[t]:Object.values(e)[0]:void 0},x=function(e){return e.filter((function(e){return null!=e}))},k=function(e){return"string"==typeof e?e:JSON.stringify(e)},O=function(e){return e?{value:e.centAmount/100,currencyCode:e.currencyCode}:{value:-1,currencyCode:"USD"}},I=function(e){return{__typename:"MultipleChoiceOption",id:e.name,displayName:e.name,values:(t=Array.isArray(e.value)?e.value:[e.value],[].concat(new Set(t))).map((function(t){return e.name.match(/colou?r/gi)&&/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i.test(t)?{label:k(t),hexColors:[t]}:{label:k(t)}}))};var t},q=function(e){var t,r,n,o,a,i,u=O(null!=(t=null==(r=e.prices)||null==(r=r.find((function(e){return"USD"===e.value.currencyCode})))?void 0:r.value)?t:null==(n=e.prices)||null==(n=n[0])?void 0:n.value).value;return{id:""+e.id,name:""+e.id,sku:null!=(o=e.sku)?o:"",price:u,options:null!=(a=null==(i=e.attributes)?void 0:i.map((function(e){return I({name:e.name,value:e.value.key})})))?a:[],requiresShipping:!1,listPrice:u}},j=function(e,t){var r,n,o,a,i,u;return{id:e.id,name:null!=(r=w(e.name,t))?r:"",slug:w(e.slug,t),path:"/"+w(e.slug,t),description:null!=(n=w(e.description,t))?n:"",price:O(null!=(o=null==(a=e.masterVariant.prices)||null==(a=a.find((function(e){return"USD"===e.value.currencyCode})))?void 0:a.value)?o:null==(i=e.masterVariant.prices)||null==(i=i[0])?void 0:i.value),images:(u=x([].concat(e.masterVariant.images?e.masterVariant.images:[],e.variants.flatMap((function(e){return e.images})))),u.map((function(e){return p({url:e.url},e.label?{alt:e.label}:{},{width:e.dimensions.w,height:e.dimensions.h})}))),variants:[e.masterVariant].concat(e.variants).map(q),options:x([].concat(e.masterVariant.attributes?e.masterVariant.attributes:[],e.variants.flatMap((function(e){return e.attributes})))).reduce((function(e,t){var r=e.find((function(e){return e.name===t.name}));return r?r.value.push(k(t.value.key)):e.push({name:t.name,value:[k(t.value.key)]}),e}),[]).map(I)}},C=function(e,t){return{id:e.id,customerId:e.customerId,email:e.customerEmail,createdAt:e.createdAt,currency:{code:"USD"},taxesIncluded:"Disabled"!==e.taxMode,lineItems:e.lineItems.map((function(e){return function(e,t){var r,n,o;return{id:e.id,variantId:""+e.variant.id,productId:e.productId,name:null!=(r=w(e.name,t))?r:"",path:"",quantity:e.quantity,discounts:[],variant:q(e.variant),options:null!=(n=null==(o=e.variant.attributes)?void 0:o.map((function(e){return{id:e.name,name:e.name,value:e.value.key}})))?n:[]}}(e,t)})),lineItemsSubtotalPrice:0,subtotalPrice:O(e.totalPrice).value,totalPrice:O(e.totalPrice).value,discounts:[]}},L=function(e,t){var r,n;return{id:e.id,name:null!=(r=w(e.name,t))?r:"",slug:null!=(n=w(e.slug,t))?n:"",path:"/"+w(e.slug,t)}},E={fetchOptions:{query:"cart",method:"get"},fetcher:function(e){return f(d().mark((function t(){var r,n,o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.fetch,n=e.provider,t.next=3,g(r);case 3:return t.abrupt("return",(o=t.sent)?C(o,n.locale):null);case 5:case"end":return t.stop()}}),t)})))()},useHook:function(e){var t=e.useData;return function(e){var r=t({swrOptions:p({revalidateOnFocus:!1},null==e?void 0:e.swrOptions)});return o.useMemo((function(){return Object.create(r,{isEmpty:{get:function(){var e,t;return(null!=(e=null==(t=r.data)?void 0:t.lineItems.length)?e:0)<=0},enumerable:!0}})}),[r])}}},P={fetchOptions:{query:"cart",method:"post"},fetcher:function(e){return f(d().mark((function t(){var r,n,o,a,i,u;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.input,o=e.fetch,a=e.provider,t.next=3,g(o);case 3:if(i=t.sent,(!n.quantity||Number.isInteger(n.quantity)&&!(n.quantity<1))&&i){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.next=8,o({query:"carts",method:"post",variables:{id:i.id},body:{version:i.version,actions:[{action:"addLineItem",variantId:+n.variantId,productId:n.productId,quantity:null!=(r=n.quantity)?r:1}]}});case 8:return(u=t.sent).body?m(u.body.id):y(),t.abrupt("return",u.body?C(u.body,a.locale):void 0);case 11:case"end":return t.stop()}}),t)})))()},useHook:function(e){var t=e.fetch;return function(){var e=n.useCart().mutate;return o.useCallback(function(){var r=f(d().mark((function r(n){var o;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t({input:n});case 2:return o=r.sent,r.next=5,e(o,!1);case 5:return r.abrupt("return",o);case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),[t,e])}}},S={fetchOptions:{query:"cart",method:"post"},fetcher:function(e){return f(d().mark((function t(){var r,n,o,a,i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.input.itemId,n=e.fetch,o=e.provider,t.next=3,g(n);case 3:if(a=t.sent,r&&a){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.next=8,n({query:"carts",method:"post",variables:{id:a.id},body:{version:a.version,actions:[{action:"removeLineItem",lineItemId:r}]}});case 8:return(i=t.sent).body?m(i.body.id):y(),t.abrupt("return",C(i.body,o.locale));case 11:case"end":return t.stop()}}),t)})))()},useHook:function(e){var t=e.fetch;return function(e){void 0===e&&(e={});var r=e.item,a=n.useCart().mutate;return o.useCallback(function(){var e=f(d().mark((function e(o){var i,u,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=null!=(i=null==o?void 0:o.id)?i:null==r?void 0:r.id){e.next=3;break}throw new n.ValidationError({message:"Invalid input used for this operation"});case 3:return e.next=5,t({input:{itemId:u}});case 5:return c=e.sent,e.next=8,a(c,!1);case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,a])}}},_={fetchOptions:{query:"cart",method:"post"},fetcher:function(e){return f(d().mark((function t(){var r,o,a,i,u,c,s,l;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=(o=e.input).item,i=o.itemId,u=e.fetch,c=e.provider,!Number.isInteger(a.quantity)){t.next=6;break}if(!(a.quantity<1)){t.next=4;break}return t.abrupt("return",null==S.fetcher?void 0:S.fetcher({options:S.fetchOptions,input:{itemId:i},fetch:u,provider:c}));case 4:t.next=8;break;case 6:if(!a.quantity){t.next=8;break}throw new n.ValidationError({message:"The item quantity has to be a valid integer"});case 8:return t.next=10,g(u);case 10:if(s=t.sent,(!a.quantity||Number.isInteger(a.quantity)&&!(a.quantity<1))&&s){t.next=13;break}return t.abrupt("return",void 0);case 13:return t.next=15,u({query:"carts",method:"post",variables:{id:s.id},body:{version:s.version,actions:[{action:"changeLineItemQuantity",lineItemId:i,quantity:null!=(r=a.quantity)?r:1}]}});case 15:return(l=t.sent).body?m(l.body.id):y(),t.abrupt("return",l.body?C(l.body,c.locale):void 0);case 18:case"end":return t.stop()}}),t)})))()},useHook:function(e){var t=e.fetch;return function(e){var r;void 0===e&&(e={});var a=e.item,i=n.useCart().mutate;return o.useCallback(u(function(){var e=f(d().mark((function e(r){var o,u,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((u=null!=(o=r.id)?o:null==a?void 0:a.id)&&null!=r.quantity){e.next=3;break}throw new n.ValidationError({message:"Invalid input used for this operation"});case 3:return e.next=5,t({input:{item:{quantity:r.quantity},itemId:u}});case 5:return c=e.sent,e.next=8,i(c,!1);case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),null!=(r=e.wait)?r:500),[t,i])}}},N=function(e){var t=function(e){var t={host:"https://auth."+e.region+".commercetools.com",projectKey:e.clientSecret,credentials:{clientId:e.clientId,clientSecret:e.clientSecret},scopes:["manage_project:"+e.projectKey],fetch:fetch},r={host:"https://api."+e.region+".commercetools.com",fetch:fetch};return(new s.ClientBuilder).withProjectKey(e.projectKey).withClientCredentialsFlow(t).withHttpMiddleware(r).build()}(e),r=c.createApiBuilderFromCtpClient(t).withProjectKey({projectKey:e.projectKey});return function(){var e=f(d().mark((function e(t){var n,o,a,i,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.method,o=t.variables,i=t.body,u=r,(a=t.query)&&(u=u[a]()),null!=o&&o.id&&(u=u.withId({ID:o.id})),null!=o&&o.search&&(u=u.search()),e.next=7,u[n]({body:i,queryArgs:p({expand:null==o?void 0:o.expand,limit:null==o?void 0:o.limit},null!=o&&o.sort?{sort:o.sort}:{},null!=o&&o.search?o.search:{},null!=o&&o.filters?{filter:o.filters}:{},null!=o&&o.where?{where:o.where}:{})}).execute();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},A={fetchOptions:{query:"productProjections",method:"get"},fetcher:function(e){return f(d().mark((function t(){var r,n,o,a,i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.options,n=e.fetch,o=e.provider,a=e.input.id){t.next=4;break}return t.abrupt("return",null);case 4:return t.next=6,n(p({},r,{variables:{id:a}}));case 6:return t.abrupt("return",(i=t.sent).body?j(i.body,o.locale):null);case 8:case"end":return t.stop()}}),t)})))()},useHook:function(e){var t=e.useData;return function(e){return void 0===e&&(e={}),t({input:[["id",e.id]],swrOptions:p({revalidateOnFocus:!1},e.swrOptions)})}}},D={fetchOptions:{method:"get",query:"productProjections"},fetcher:function(e){return f(d().mark((function t(){var r,n,o,a,i,u,c,s,l,f;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.options,a=e.fetch,i=e.provider,u=(n=e.input).search,c=n.categoryId,s=n.sort,l=n.count,t.next=4,a(p({},o,{variables:p({expand:["masterData.current"],sort:v(s),limit:l},u?{search:(r={},r["text."+(null==i?void 0:i.locale)]=u,r)}:{},c?{filters:'categories.id: subtree("'+c+'")'}:{})}));case 4:return t.abrupt("return",{products:(f=t.sent).body.results.map((function(e){return j(e,i.locale)})),found:f.body.count>0});case 6:case"end":return t.stop()}}),t)})))()},useHook:function(e){var t=e.useData;return function(e){return void 0===e&&(e={}),t({input:[["search",e.search],["categoryId",e.categoryId],["brandId",e.brandId],["sort",e.sort],["locale",e.locale],["count",e.count]],swrOptions:p({revalidateOnFocus:!1},e.swrOptions)})}}},F={fetchOptions:{query:""},fetcher:function(e){return f(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 2:case"end":return e.stop()}}),e)})))()},useHook:function(e){var t=e.useData;return function(e){var r=t({swrOptions:p({revalidateOnFocus:!1},null==e?void 0:e.swrOptions)});return o.useMemo((function(){return Object.create(r,{isEmpty:{get:function(){var e,t;return(null!=(e=null==(t=r.data)?void 0:t.length)?e:0)<=0},enumerable:!0}})}),[r])}}},V={fetchOptions:{query:"categories",method:"get"},fetcher:function(e){return f(d().mark((function t(){var r,n,o,a,i,u;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.options,n=e.fetch,o=e.provider,a=e.input.categoryId){t.next=9;break}return t.next=5,n(p({},r));case 5:return t.abrupt("return",(i=t.sent).body?i.body.results.map((function(e){return L(e,o.locale)})):[]);case 9:return t.next=11,n(p({},r,{variables:p({},a?{id:a}:{})}));case 11:return t.abrupt("return",(u=t.sent).body?[L(u.body,o.locale)]:[]);case 13:case"end":return t.stop()}}),t)})))()},useHook:function(e){var t=e.useData;return function(e){var r=t({input:[["categoryId",null==e?void 0:e.categoryId]],swrOptions:p({revalidateOnFocus:!1},null==e?void 0:e.swrOptions)});return o.useMemo((function(){return Object.create(r,{isEmpty:{get:function(){var e,t;return(null!=(e=null==(t=r.data)?void 0:t.length)?e:0)<=0},enumerable:!0}})}),[r])}}},K=function(e,t){return n.getCommerceProvider(function(e,t){return{locale:t,cartCookie:"commercetools_cart",cart:{useCart:E,useAddItem:P,useRemoveItem:S,useUpdateItem:_},fetcher:N(e),products:{useSearch:D,useProduct:A},site:{useCategories:V,useBrands:F}}}(e,t))},M=p({name:"plasmic-commerce-commercetools-provider",displayName:"Commercetools Provider",props:{projectKey:{type:"string",defaultValue:"plasmic-demo"},clientId:{type:"string",defaultValue:"B4hmK61xvz5LvdSDtsFmcflM"},clientSecret:{type:"string",defaultValue:"KhzjcjSu1Oul4aomSmOsLZOCZKbvfHqx"},region:{type:"choice",options:["us-central1.gcp","us-east-2.aws","europe-west1.gcp","eu-central-1.aws","australia-southeast1.gcp"],defaultValue:"us-central1.gcp"}}},{globalActions:n.globalActionsRegistrations},{importPath:"@plasmicpkgs/commercetools",importName:"CommerceProviderComponent"});function G(e){var t=e.children,o=e.projectKey,i=e.clientId,u=e.clientSecret,c=e.region,s=a.useMemo((function(){return{projectKey:o,clientId:i,clientSecret:u,region:c}}),[o,i,u,c]),l=r.usePlasmicQueryData(JSON.stringify({creds:s})+"locale",f(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N(s),e.next=3,t({method:"get"});case 3:return e.abrupt("return",(r=e.sent).body?r.body.languages[0]:void 0);case 5:case"end":return e.stop()}}),e)})))),p=l.data,v=l.error,h=l.isLoading,m=a.useMemo((function(){return K(s,null!=p?p:"")}),[s,p]);if(h)return null;if(v||!p)throw new Error(v?v.message:"Project language not found");return a.createElement(m,null,a.createElement(n.CartActionsProvider,{globalContextName:"plasmic-commerce-commercetools-provider"},t))}function H(e,r){!function(){e?e.registerGlobalContext.apply(e,arguments):t.apply(void 0,arguments)}(G,null!=r?r:M)}exports.CommerceProviderComponent=G,exports.commerceProviderMeta=M,exports.getCommerceProvider=K,exports.registerAll=function(e){H(e)},exports.registerCommerceProvider=H,exports.useCommerce=function(){return n.useCommerce()};
//# sourceMappingURL=commerce-commercetools.cjs.production.min.js.map
