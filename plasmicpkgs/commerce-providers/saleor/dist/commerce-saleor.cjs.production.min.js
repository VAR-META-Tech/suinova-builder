"use strict";function n(n){return n&&"object"==typeof n&&"default"in n?n.default:n}Object.defineProperty(exports,"__esModule",{value:!0});var e=n(require("@plasmicapp/host/registerGlobalContext")),t=require("@plasmicpkgs/commerce"),r=require("react"),o=n(r),a=n(require("js-cookie")),i=n(require("debounce"));function u(n,e,t,r,o,a,i){try{var u=n[a](i),c=u.value}catch(n){return void t(n)}u.done?e(c):Promise.resolve(c).then(r,o)}function c(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(n){u(a,r,o,i,c,"next",n)}function c(n){u(a,r,o,i,c,"throw",n)}i(void 0)}))}}function s(){return(s=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(null,arguments)}function l(n,e){if(null==n)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(-1!==e.indexOf(r))continue;t[r]=n[r]}return t}function d(){d=function(){return e};var n,e={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(n,e,t){n[e]=t.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(n,e,t){return Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),n[e]}try{s({},"")}catch(n){s=function(n,e,t){return n[e]=t}}function l(n,e,t,r){var a=Object.create((e&&e.prototype instanceof g?e:g).prototype),i=new L(r||[]);return o(a,"_invoke",{value:O(n,t,i)}),a}function p(n,e,t){try{return{type:"normal",arg:n.call(e,t)}}catch(n){return{type:"throw",arg:n}}}e.wrap=l;var f="suspendedStart",h="executing",m="completed",v={};function g(){}function y(){}function k(){}var b={};s(b,i,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(S([])));x&&x!==t&&r.call(x,i)&&(b=x);var I=k.prototype=g.prototype=Object.create(b);function C(n){["next","throw","return"].forEach((function(e){s(n,e,(function(n){return this._invoke(e,n)}))}))}function P(n,e){function t(o,a,i,u){var c=p(n[o],n,a);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(n){t("next",n,i,u)}),(function(n){t("throw",n,i,u)})):e.resolve(l).then((function(n){s.value=n,i(s)}),(function(n){return t("throw",n,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(n,r){function o(){return new e((function(e,o){t(n,r,e,o)}))}return a=a?a.then(o,o):o()}})}function O(e,t,r){var o=f;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:n,done:!0}}for(r.method=a,r.arg=i;;){var u=r.delegate;if(u){var c=q(u,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var s=p(e,t,r);if("normal"===s.type){if(o=r.done?m:"suspendedYield",s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=m,r.method="throw",r.arg=s.arg)}}}function q(e,t){var r=t.method,o=e.iterator[r];if(o===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=n,q(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=p(o,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,v;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,v):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function E(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function $(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function L(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(E,this),this.reset(!0)}function S(e){if(e||""===e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function t(){for(;++o<e.length;)if(r.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=n,t.done=!0,t};return a.next=a}}throw new TypeError(typeof e+" is not iterable")}return y.prototype=k,o(I,"constructor",{value:k,configurable:!0}),o(k,"constructor",{value:y,configurable:!0}),y.displayName=s(k,c,"GeneratorFunction"),e.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,k):(n.__proto__=k,s(n,c,"GeneratorFunction")),n.prototype=Object.create(I),n},e.awrap=function(n){return{__await:n}},C(P.prototype),s(P.prototype,u,(function(){return this})),e.AsyncIterator=P,e.async=function(n,t,r,o,a){void 0===a&&(a=Promise);var i=new P(l(n,t,r,o),a);return e.isGeneratorFunction(t)?i:i.next().then((function(n){return n.done?n.value:i.next()}))},C(I),s(I,c,"Generator"),s(I,i,(function(){return this})),s(I,"toString",(function(){return"[object Generator]"})),e.keys=function(n){var e=Object(n),t=[];for(var r in e)t.push(r);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach($),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(r,o){return u.type="throw",u.arg=e,t.next=r,o&&(t.method="next",t.arg=n),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(n,e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===n||"continue"===n)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=n,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(n,e){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&e&&(this.next=e),v},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),$(t),v}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var r=t.completion;if("throw"===r.type){var o=r.arg;$(t)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),v}},e}function p(n,e){var r;return n=null!=(r=n)?r:[{message:"Failed to fetch Saleor API"}],new t.FetcherError({errors:n,status:e})}function f(n){return h.apply(this,arguments)}function h(){return(h=c(d().mark((function n(e){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.json();case 2:return n.abrupt("return",p(n.sent.errors,e.status));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var m=function(){var n=c(d().mark((function n(e){var t,r,o;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.ok){n.next=9;break}return n.next=3,e.json();case 3:if(r=(t=n.sent).data,!(o=t.errors)||!o.length){n.next=8;break}throw p(o,e.status);case 8:return n.abrupt("return",r);case 9:return n.next=11,f(e);case 11:throw n.sent;case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),v=function(n){var e=n.count;return{categoryId:n.categoryId,filter:{search:n.search},sortBy:s({field:"NAME",direction:"ASC"},function(n,e){var t={};switch(n){case"price-asc":t={field:"PRICE",direction:"ASC"};break;case"price-desc":t={field:"PRICE",direction:"DESC"};break;case"trending-desc":t={};break;case"latest-desc":t={field:"DATE",direction:"DESC"}}return t}(n.sort),{channel:"default-channel"}),first:e}},g=function(n){var e,t=(null==(e=a.get("saleor.CheckoutID"))?void 0:e.split(":"))||[];return{checkoutId:t[0],checkoutToken:t[1]}},y=function(){var n=c(d().mark((function n(e){var t,r,o,i;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e({query:'\n  mutation CheckoutCreate {\n    checkoutCreate(input: { email: "customer@example.com", lines: [], channel: "default-channel" }) {\n      errors {\n        code\n        field\n        message\n      }\n      checkout {\n        ...CheckoutDetails\n      }\n    }\n  }\n  \n  fragment CheckoutDetails on Checkout {\n    id\n    token\n    created\n    totalPrice {\n      currency\n      gross {\n        amount\n      }\n    }\n    subtotalPrice {\n      currency\n      gross {\n        amount\n      }\n    }\n\n    lines {\n      id\n      variant {\n        id\n        name\n        sku\n        product {\n          name\n          slug\n          id\n        }\n        media {\n          url\n        }\n        pricing {\n          price {\n            gross {\n              amount\n            }\n          }\n        }\n      }\n      quantity\n      totalPrice {\n        currency\n        gross {\n          amount\n        }\n      }\n    }\n  }\n\n'});case 2:return r=null==(t=n.sent.checkoutCreate)?void 0:t.checkout,i=(o=null==r?void 0:r.id)+":"+(null==r?void 0:r.token),o&&a.set("saleor.CheckoutID",i,{expires:2592e3,sameSite:"none",secure:!0}),n.abrupt("return",r);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),k=["id","name","media","variants","description","slug","pricing"],b=function(n){return{value:+n.amount,currencyCode:n.currency||"USD"}},w=function(n){return null==n?void 0:n.map((function(n){return null==n?void 0:n.attributes})).flat(1).reduce((function(n,e){return n.find((function(n){return n.displayName===e.attribute.name}))?n.map((function(n){return n.displayName===e.attribute.name?s({},n,{values:[].concat(n.values,e.values.map((function(n){return{label:null==n?void 0:n.name}})))}):n})):n.concat({__typename:"MultipleChoiceOption",displayName:e.attribute.name,variant:"size",values:e.values.map((function(n){return{label:null==n?void 0:n.name}}))})}),[])},x=function(n){return null==n?void 0:n.map((function(n){var e,t,r=n.id,o=n.sku,a=n.name,i=n.pricing,u=(null==i||null==(e=i.price)?void 0:e.net)&&(null==(t=b(i.price.net))?void 0:t.value);return{id:r,name:a,sku:null!=o?o:r,price:u,listPrice:u,requiresShipping:!0,options:w([n])}}))};function I(n){var e,t,r=n.id,o=n.name,a=n.media,i=void 0===a?[]:a,u=n.variants,c=n.description,d=n.slug,p=n.pricing,f=l(n,k);return s({id:r,name:o,vendor:"",description:c?null==(e=JSON.parse(c))||null==(e=e.blocks[0])?void 0:e.data.text:"",path:"/"+d,slug:null==d?void 0:d.replace(/^\/+|\/+$/g,""),price:(null==p||null==(t=p.priceRange)||null==(t=t.start)?void 0:t.net)&&b(p.priceRange.start.net)||{value:0,currencyCode:"USD"},images:null!=i&&i.length?i:[{url:"/product-img-placeholder.svg"}],variants:u&&u.length>0?x(u):[],options:u&&u.length>0?w(u):[]},f)}function C(n){var e,t,r,o,a=n.variant,i=n.quantity;return{id:n.id,variantId:String(null==a?void 0:a.id),productId:String(null==a||null==(e=a.product)?void 0:e.id),name:""+a.product.name,quantity:i,variant:{id:String(null==a?void 0:a.id),sku:null!=(t=null==a?void 0:a.sku)?t:"",name:null==a?void 0:a.name,image:{url:null!=a&&a.media[0]?null==a?void 0:a.media[0].url:"/product-img-placeholder.svg"},requiresShipping:!1,price:null==a||null==(r=a.pricing)||null==(r=r.price)?void 0:r.gross.amount,listPrice:0},path:String(null==a||null==(o=a.product)?void 0:o.slug),discounts:[],options:[]}}var P=function(n){var e=n.slug;return{id:n.id,name:n.name,slug:e,path:"/"+e}},O=function(n){var e;if(!n)throw new t.CommerceError({message:"Missing checkout payload from response"});var r=null==n?void 0:n.checkout;if(1!==(null==n||null==(e=n.errors)?void 0:e.length)||"PRODUCT_UNAVAILABLE_FOR_PURCHASE"!==n.errors[0].code){if(null!=n&&n.errors&&function(n){if(n&&n.length)throw new t.ValidationError({errors:n.map((function(n){var e=n.code;return{code:null!=e?e:"validation_error",message:n.message||""}}))})}(null==n?void 0:n.errors),!r)throw new t.CommerceError({message:"Missing checkout object from response"});return function(n){var e,t,r,o,a=n.lines,i=a.length>0?null==a?void 0:a.map(C):[];return{id:n.id,customerId:"",email:"",createdAt:n.created,currency:{code:null==(e=n.totalPrice)?void 0:e.currency},taxesIncluded:!1,lineItems:i,lineItemsSubtotalPrice:null==(t=n.subtotalPrice)||null==(t=t.gross)?void 0:t.amount,subtotalPrice:null==(r=n.subtotalPrice)||null==(r=r.gross)?void 0:r.amount,totalPrice:null==(o=n.totalPrice)?void 0:o.gross.amount,discounts:[]}}(r)}console.error(n.errors[0])},q='\n  query CollectionMany( $channel: String = "default-channel") {\n    collections(first:100, channel: $channel) {\n      edges {\n        node {\n          id\n          name\n          slug\n        }\n      }\n    }\n  }\n',E='\n  query getProductsFromCollection($categoryId: ID!, $first: Int = 100, $channel: String = "default-channel") {\n    collection(id: $categoryId, channel: $channel) {\n      id\n      name\n      slug\n      products(first: $first) {\n        ...ProductConnection\n      }\n    }\n  }\n  \n  fragment ProductConnection on ProductCountableConnection {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n    }\n    edges {\n      node {\n        id\n        name\n        description\n        slug\n        pricing {\n          priceRange {\n            start {\n              net {\n                amount\n              }\n            }\n          }\n        }\n        media {\n          url\n          alt\n        }\n        variants {\n          id\n          name\n          attributes {\n            attribute {\n              name\n            }\n            values {\n              name\n            }\n          }\n          pricing {\n            price {\n              net {\n                amount\n                currency\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n',$={fetchOptions:{query:"\n  query CheckoutOne($checkoutId: UUID!) {\n    checkout(token: $checkoutId) {\n      ... on Checkout {\n        ...CheckoutDetails\n      }\n    }\n  }\n  \n  fragment CheckoutDetails on Checkout {\n    id\n    token\n    created\n    totalPrice {\n      currency\n      gross {\n        amount\n      }\n    }\n    subtotalPrice {\n      currency\n      gross {\n        amount\n      }\n    }\n\n    lines {\n      id\n      variant {\n        id\n        name\n        sku\n        product {\n          name\n          slug\n          id\n        }\n        media {\n          url\n        }\n        pricing {\n          price {\n            gross {\n              amount\n            }\n          }\n        }\n      }\n      quantity\n      totalPrice {\n        currency\n        gross {\n          amount\n        }\n      }\n    }\n  }\n\n"},fetcher:function(n){return c(d().mark((function e(){var t,r,o,a,i,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.options,a=n.fetch,!(r=n.input.cartId)){e.next=7;break}return u=g().checkoutToken,e.next=5,a(s({},o,{variables:{checkoutId:u}}));case 5:i=e.sent;case 7:if((null==(t=i)||!t.completedAt)&&r){e.next=11;break}return e.next=10,y(a);case 10:i=e.sent;case 11:return e.abrupt("return",O(i));case 12:case"end":return e.stop()}}),e)})))()},useHook:function(n){var e=n.useData;return function(n){var t=e({swrOptions:s({revalidateOnFocus:!1},null==n?void 0:n.swrOptions)});return r.useMemo((function(){return Object.create(t,{isEmpty:{get:function(){var n,e;return(null!=(n=null==(e=t.data)?void 0:e.lineItems.length)?n:0)<=0},enumerable:!0}})}),[t])}}},L={fetchOptions:{query:"\n  mutation CheckoutLineAdd($checkoutId: ID!, $lineItems: [CheckoutLineInput!]!) {\n    checkoutLinesAdd(checkoutId: $checkoutId, lines: $lineItems) {\n      errors {\n        code\n        field\n        message\n      }\n      checkout {\n        ...CheckoutDetails\n      }\n    }\n  }\n  \n  fragment CheckoutDetails on Checkout {\n    id\n    token\n    created\n    totalPrice {\n      currency\n      gross {\n        amount\n      }\n    }\n    subtotalPrice {\n      currency\n      gross {\n        amount\n      }\n    }\n\n    lines {\n      id\n      variant {\n        id\n        name\n        sku\n        product {\n          name\n          slug\n          id\n        }\n        media {\n          url\n        }\n        pricing {\n          price {\n            gross {\n              amount\n            }\n          }\n        }\n      }\n      quantity\n      totalPrice {\n        currency\n        gross {\n          amount\n        }\n      }\n    }\n  }\n\n"},fetcher:function(n){return c(d().mark((function e(){var r,o,a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.options,i=n.fetch,!(o=n.input).quantity||Number.isInteger(o.quantity)&&!(o.quantity<1)){e.next=3;break}throw new t.CommerceError({message:"The item quantity has to be a valid integer greater than 0"});case 3:return e.next=5,i(s({},a,{variables:{checkoutId:g().checkoutId,lineItems:[{variantId:o.variantId,quantity:null!=(r=o.quantity)?r:1}]}}));case 5:return e.abrupt("return",O(e.sent.checkoutLinesAdd));case 8:case"end":return e.stop()}}),e)})))()},useHook:function(n){var e=n.fetch;return function(){var n=t.useCart().mutate;return r.useCallback(function(){var t=c(d().mark((function t(r){var o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({input:r});case 2:if(!(o=t.sent)){t.next=8;break}return t.next=6,n(o,!1);case 6:t.next=10;break;case 8:return t.next=10,n();case 10:return t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),[e,n])}}},S={fetchOptions:{query:"\n  mutation CheckoutLineDelete($checkoutId: ID!, $lineId: ID!) {\n    checkoutLineDelete(checkoutId: $checkoutId, lineId: $lineId) {\n      errors {\n        code\n        field\n        message\n      }\n      checkout {\n        ...CheckoutDetails\n      }\n    }\n  }\n  \n  fragment CheckoutDetails on Checkout {\n    id\n    token\n    created\n    totalPrice {\n      currency\n      gross {\n        amount\n      }\n    }\n    subtotalPrice {\n      currency\n      gross {\n        amount\n      }\n    }\n\n    lines {\n      id\n      variant {\n        id\n        name\n        sku\n        product {\n          name\n          slug\n          id\n        }\n        media {\n          url\n        }\n        pricing {\n          price {\n            gross {\n              amount\n            }\n          }\n        }\n      }\n      quantity\n      totalPrice {\n        currency\n        gross {\n          amount\n        }\n      }\n    }\n  }\n\n"},fetcher:function(n){return c(d().mark((function e(){var t,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.input.itemId,r=n.options,o=n.fetch,e.next=3,o(s({},r,{variables:{checkoutId:g().checkoutId,lineId:t}}));case 3:return e.abrupt("return",O(e.sent.checkoutLineDelete));case 5:case"end":return e.stop()}}),e)})))()},useHook:function(n){var e=n.fetch;return function(){var n=t.useCart().mutate;return r.useCallback(function(){var t=c(d().mark((function t(r){var o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({input:{itemId:r.id}});case 2:return o=t.sent,t.next=5,n(o,!1);case 5:return t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),[e,n])}}},D={fetchOptions:{query:"\n  mutation CheckoutLineUpdate($checkoutId: ID!, $lineItems: [CheckoutLineInput!]!) {\n    checkoutLinesUpdate(checkoutId: $checkoutId, lines: $lineItems) {\n      errors {\n        code\n        field\n        message\n      }\n      checkout {\n        ...CheckoutDetails\n      }\n    }\n  }\n  \n  fragment CheckoutDetails on Checkout {\n    id\n    token\n    created\n    totalPrice {\n      currency\n      gross {\n        amount\n      }\n    }\n    subtotalPrice {\n      currency\n      gross {\n        amount\n      }\n    }\n\n    lines {\n      id\n      variant {\n        id\n        name\n        sku\n        product {\n          name\n          slug\n          id\n        }\n        media {\n          url\n        }\n        pricing {\n          price {\n            gross {\n              amount\n            }\n          }\n        }\n      }\n      quantity\n      totalPrice {\n        currency\n        gross {\n          amount\n        }\n      }\n    }\n  }\n\n"},fetcher:function(n){return c(d().mark((function e(){var r,o,a,i,u,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(r=n.input).itemId,a=r.item,i=n.options,u=n.fetch,!Number.isInteger(a.quantity)){e.next=6;break}if(!(a.quantity<1)){e.next=4;break}return e.abrupt("return",S.fetcher({options:S.fetchOptions,input:{itemId:o},fetch:u}));case 4:e.next=8;break;case 6:if(!a.quantity){e.next=8;break}throw new t.ValidationError({message:"The item quantity has to be a valid integer"});case 8:return c=g().checkoutId,e.next=11,u(s({},i,{variables:{checkoutId:c,lineItems:[{itemId:o,quantity:a.quantity}]}}));case 11:return e.abrupt("return",O(e.sent.checkoutLinesUpdate));case 14:case"end":return e.stop()}}),e)})))()},useHook:function(n){var e=n.fetch;return function(n){var o;void 0===n&&(n={});var a=n.item,u=t.useCart().mutate;return r.useCallback(i(function(){var n=c(d().mark((function n(r){var o,i,c;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=null!=(o=r.id)?o:null==a?void 0:a.id){n.next=3;break}throw new t.ValidationError({message:"Invalid input used for this operation"});case 3:return n.next=5,e({input:{item:{quantity:r.quantity},itemId:i}});case 5:return c=n.sent,n.next=8,u(c,!1);case 8:return n.abrupt("return",c);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),null!=(o=n.wait)?o:500),[e,u])}}},j={fetchOptions:{query:q},fetcher:function(n){return c(d().mark((function e(){var t,r,o,a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.fetch,r=n.input.categoryId){e.next=9;break}return e.next=5,t({query:q,variables:{first:250}});case 5:return e.abrupt("return",null!=(o=null==(a=e.sent.collections)||null==(a=a.edges)?void 0:a.map((function(n){return P(n.node)})))?o:[]);case 9:return e.next=11,t({query:E,variables:{categoryId:r}});case 11:return e.abrupt("return",null!=(i=e.sent)&&i.collection?[P(null==i?void 0:i.collection)]:[]);case 13:case"end":return e.stop()}}),e)})))()},useHook:function(n){var e=n.useData;return function(n){var t=e({input:[["categoryId",null==n?void 0:n.categoryId]],swrOptions:s({revalidateOnFocus:!1},null==n?void 0:n.swrOptions)});return r.useMemo((function(){return Object.create(t,{isEmpty:{get:function(){var n,e;return(null!=(n=null==(e=t.data)?void 0:e.length)?n:0)<=0},enumerable:!0}})}),[t])}}},A={fetchOptions:{query:'\n  query getAllProductVendors($cursor: String, $channel: String = "default-channel") {\n    products(first:100,channel: $channel, after: $cursor) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          slug\n        }\n        cursor\n      }\n    }\n  }\n'},fetcher:function(n){return c(d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",[]);case 2:case"end":return n.stop()}}),n)})))()},useHook:function(n){var e=n.useData;return function(n){var t=e({swrOptions:s({revalidateOnFocus:!1},null==n?void 0:n.swrOptions)});return r.useMemo((function(){return Object.create(t,{isEmpty:{get:function(){var n,e;return(null!=(n=null==(e=t.data)?void 0:e.length)?n:0)<=0},enumerable:!0}})}),[t])}}},N={fetchOptions:{query:'\n  query ProductMany(\n    $first: Int = 100\n    $filter: ProductFilterInput\n    $sortBy: ProductOrder\n    $channel: String = "default-channel"\n  ) {\n    products(first: $first, channel: $channel, filter: $filter, sortBy: $sortBy) {\n      ...ProductConnection\n    }\n  }\n  \n  fragment ProductConnection on ProductCountableConnection {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n    }\n    edges {\n      node {\n        id\n        name\n        description\n        slug\n        pricing {\n          priceRange {\n            start {\n              net {\n                amount\n              }\n            }\n          }\n        }\n        media {\n          url\n          alt\n        }\n        variants {\n          id\n          name\n          attributes {\n            attribute {\n              name\n            }\n            values {\n              name\n            }\n          }\n          pricing {\n            price {\n              net {\n                amount\n                currency\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n'},fetcher:function(n){return c(d().mark((function e(){var t,r,o,a,i,u,c,s,l,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.options,o=n.fetch,a=(t=n.input).categoryId,e.next=4,o({query:a?E:r.query,method:null==r?void 0:r.method,variables:v(t)});case 4:return i=e.sent,u=a?null!=(c=null==(s=i.collection)||null==(s=s.products)?void 0:s.edges)?c:[]:null!=(l=null==(p=i.products)?void 0:p.edges)?l:[],e.abrupt("return",{products:u.map((function(n){return I(n.node)})),found:!!u.length});case 7:case"end":return e.stop()}}),e)})))()},useHook:function(n){var e=n.useData;return function(n){return void 0===n&&(n={}),e({input:[["search",n.search],["categoryId",n.categoryId],["brandId",n.brandId],["sort",n.sort],["count",n.count]],swrOptions:s({revalidateOnFocus:!1},n.swrOptions)})}}},_='\n  query ProductOneById($id: ID!, $channel: String = "default-channel") {\n    product(id: $id, channel: $channel) {\n\n      slug\n      name\n      description\n      pricing {\n        priceRange {\n          start {\n            net {\n              amount\n            }\n          }\n        }\n      }\n      variants {\n        id\n        name\n        attributes {\n          attribute {\n            name\n          }\n          values {\n            name\n          }\n        }\n        pricing {\n          price {\n            net {\n              amount\n              currency\n            }\n          }\n        }\n      }\n      media {\n        url\n        alt\n      }\n    }\n  }',T={fetchOptions:{query:_},fetcher:function(n){return c(d().mark((function e(){var t,r,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.fetch,r=n.input.id){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,t({query:_,variables:{id:r}});case 6:if((o=e.sent).product){e.next=12;break}return e.next=10,t({query:'\n  query ProductOneBySlug($slug: String!, $channel: String = "default-channel") {\n    product(slug: $slug, channel: $channel) {\n      id\n      slug\n      name\n      description\n      pricing {\n        priceRange {\n          start {\n            net {\n              amount\n            }\n          }\n        }\n      }\n      variants {\n        id\n        name\n        attributes {\n          attribute {\n            name\n          }\n          values {\n            name\n          }\n        }\n        pricing {\n          price {\n            net {\n              amount\n              currency\n            }\n          }\n        }\n      }\n      media {\n        url\n        alt\n      }\n    }\n  }\n',variables:{slug:r}});case 10:return e.abrupt("return",(a=e.sent).product?I(a.product):null);case 12:return e.abrupt("return",o.product?I(o.product):null);case 13:case"end":return e.stop()}}),e)})))()},useHook:function(n){var e=n.useData;return function(n){return void 0===n&&(n={}),e({input:[["id",n.id]],swrOptions:s({revalidateOnFocus:!1},n.swrOptions)})}}},F=["locale"],R=function(n){return function(){var e=c(d().mark((function e(t){var r,o,i,u,c,s,p,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0===(r=t.url)?n:r,u=void 0===(i=t.method)?"POST":i,c=t.query,p=l(null!=(s=t.variables)?s:{},F),f=a.get("saleor.Token"),e.t0=m,e.next=6,fetch(o,{method:u,body:JSON.stringify({query:c,variables:p}),headers:{Authorization:"JWT "+f,"Content-Type":"application/json"}});case 6:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},U=function(n){return t.getCommerceProvider(function(n){return{locale:"en-us",cartCookie:"saleor.CheckoutID",fetcher:R(n),cart:{useCart:$,useAddItem:L,useUpdateItem:D,useRemoveItem:S},products:{useSearch:N,useProduct:T},site:{useCategories:j,useBrands:A}}}(n))},M=s({name:"plasmic-commerce-saleor-provider",displayName:"Saleor Provider",props:{saleorApiUrl:{type:"string",defaultValue:"https://vercel.saleor.cloud/graphql/"}}},{globalActions:t.globalActionsRegistrations},{importPath:"@plasmicpkgs/commerce-saleor",importName:"CommerceProviderComponent"});function G(n){var e=n.saleorApiUrl,r=n.children,a=o.useMemo((function(){return U(e)}),[e]);return o.createElement(a,null,o.createElement(t.CartActionsProvider,{globalContextName:"plasmic-commerce-saleor-provider"},r))}function H(n,t){!function(){n?n.registerGlobalContext.apply(n,arguments):e.apply(void 0,arguments)}(G,null!=t?t:M)}exports.CommerceProviderComponent=G,exports.getCommerceProvider=U,exports.registerAll=function(n){H(n)},exports.registerCommerceProvider=H,exports.useCommerce=function(){return t.useCommerce()};
//# sourceMappingURL=commerce-saleor.cjs.production.min.js.map
