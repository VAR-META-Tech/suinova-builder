{"version":3,"file":"commerce.cjs.development.js","sources":["../src/commerce.tsx","../src/utils/define-property.ts","../src/utils/errors.ts","../src/utils/use-data.tsx","../src/utils/use-hook.ts","../src/utils/default-fetcher.ts","../src/cart/use-add-item.tsx","../src/cart/use-remove-item.tsx","../src/cart/use-update-item.tsx","../src/utils/default-product.ts","../src/contexts.tsx","../src/registerAddToCartButton.tsx","../src/cart/use-cart.tsx","../src/product/use-price.tsx","../src/registerCart.tsx","../src/registerCartProvider.tsx","../src/site/use-categories.ts","../src/registerCategoryCollection.tsx","../src/registerCategoryField.tsx","../src/registerCategoryLink.tsx","../src/registerCategoryMedia.tsx","../src/product/use-product.tsx","../src/product/use-search.tsx","../src/registerProductBox.tsx","../src/site/use-brands.ts","../src/utils/use-extra-features.ts","../src/registerProductCollection.tsx","../src/registerProductLink.tsx","../src/registerProductMedia.tsx","../src/registerProductMediaCollection.tsx","../src/utils/get-product-price.ts","../src/registerProductPrice.tsx","../src/registerProductQuantity.tsx","../src/registerProductSlider.tsx","../src/registerProductTextField.tsx","../src/registerProductVariantPicker.tsx","../src/types/site.ts","../src/index.tsx"],"sourcesContent":["/*\n  Forked from https://github.com/vercel/commerce/tree/main/packages/commerce/src\n  Changes: Removed authentication, customer and wishlist hooks\n*/\nimport React, {\n  ReactNode,\n  MutableRefObject,\n  createContext,\n  useContext,\n  useMemo,\n  useRef,\n} from 'react';\nimport type {\n  Product,\n  Cart,\n  Site\n} from './types'\nimport type { Fetcher, SWRHook, MutationHook, CommerceExtraFeatures } from './utils/types';\n\nconst Commerce = createContext<CommerceContextValue<any> | {}>({})\n\nexport type Provider = CommerceConfig & {\n  fetcher: Fetcher\n  cart?: {\n    useCart?: SWRHook<Cart.GetCartHook>\n    useAddItem?: MutationHook<Cart.AddItemHook>\n    useUpdateItem?: MutationHook<Cart.UpdateItemHook>\n    useRemoveItem?: MutationHook<Cart.RemoveItemHook>\n  }\n  products?: {\n    useSearch?: SWRHook<Product.SearchProductsHook>,\n    useProduct?: SWRHook<Product.GetProductHook>,\n  }\n  site?: {\n    useCategories?: SWRHook<Site.GetCategoriesHook>\n    useBrands?: SWRHook<Site.GetBrandsHook>\n  }\n  extraFeatures?: CommerceExtraFeatures\n}\n\nexport type CommerceConfig = {\n  locale: string\n  cartCookie: string\n}\n\nexport type CommerceContextValue<P extends Provider> = {\n  providerRef: MutableRefObject<P>\n  fetcherRef: MutableRefObject<Fetcher>\n} & CommerceConfig\n\nexport type CommerceProps<P extends Provider> = {\n  children?: ReactNode\n  provider: P\n}\n\n/**\n * These are the properties every provider should allow when implementing\n * the core commerce provider\n */\nexport type CommerceProviderProps = {\n  children?: ReactNode\n} & Partial<CommerceConfig>\n\nexport function CoreCommerceProvider<P extends Provider>({\n  provider,\n  children,\n}: CommerceProps<P>) {\n  const providerRef = useRef(provider)\n  // TODO: Remove the fetcherRef\n  const fetcherRef = useRef(provider.fetcher)\n  // If the parent re-renders this provider will re-render every\n  // consumer unless we memoize the config\n  const { locale, cartCookie } = providerRef.current\n  const cfg = useMemo(\n    () => ({ providerRef, fetcherRef, locale, cartCookie }),\n    [locale, cartCookie]\n  )\n\n  return <Commerce.Provider value={cfg}>{children}</Commerce.Provider>\n}\n\nexport function getCommerceProvider<P extends Provider>(provider: P) {\n  return function CommerceProvider({\n    children,\n    ...props\n  }: CommerceProviderProps) {\n    return (\n      <CoreCommerceProvider provider={{ ...provider, ...props }}>\n        {children}\n      </CoreCommerceProvider>\n    )\n  }\n}\n\nexport function useCommerce<P extends Provider>() {\n  return useContext(Commerce) as CommerceContextValue<P>\n}\n","/*\n  Forked from https://github.com/vercel/commerce/tree/main/packages/commerce/src\n  Changes: None\n*/\n// Taken from https://fettblog.eu/typescript-assertion-signatures/\n\ntype InferValue<Prop extends PropertyKey, Desc> = Desc extends {\n  get(): any\n  value: any\n}\n  ? never\n  : Desc extends { value: infer T }\n  ? Record<Prop, T>\n  : Desc extends { get(): infer T }\n  ? Record<Prop, T>\n  : never\n\ntype DefineProperty<\n  Prop extends PropertyKey,\n  Desc extends PropertyDescriptor\n> = Desc extends { writable: any; set(val: any): any }\n  ? never\n  : Desc extends { writable: any; get(): any }\n  ? never\n  : Desc extends { writable: false }\n  ? Readonly<InferValue<Prop, Desc>>\n  : Desc extends { writable: true }\n  ? InferValue<Prop, Desc>\n  : Readonly<InferValue<Prop, Desc>>\n\nexport default function defineProperty<\n  Obj extends object,\n  Key extends PropertyKey,\n  PDesc extends PropertyDescriptor\n>(\n  obj: Obj,\n  prop: Key,\n  val: PDesc\n): asserts obj is Obj & DefineProperty<Key, PDesc> {\n  Object.defineProperty(obj, prop, val)\n}\n","/*\n  Forked from https://github.com/vercel/commerce/tree/main/packages/commerce/src\n  Changes: None\n*/\nexport type ErrorData = {\n  message: string\n  code?: string\n}\n\nexport type ErrorProps = {\n  code?: string\n} & (\n  | { message: string; errors?: never }\n  | { message?: never; errors: ErrorData[] }\n)\n\nexport class CommerceError extends Error {\n  code?: string\n  errors: ErrorData[]\n\n  constructor({ message, code, errors }: ErrorProps) {\n    const error: ErrorData = message\n      ? { message, ...(code ? { code } : {}) }\n      : errors![0]\n\n    super(error.message)\n    this.errors = message ? [error] : errors!\n\n    if (error.code) this.code = error.code\n  }\n}\n\n// Used for errors that come from a bad implementation of the hooks\nexport class ValidationError extends CommerceError {\n  constructor(options: ErrorProps) {\n    super(options)\n    this.code = 'validation_error'\n  }\n}\n\nexport class FetcherError extends CommerceError {\n  status: number\n\n  constructor(\n    options: {\n      status: number\n    } & ErrorProps\n  ) {\n    super(options)\n    this.status = options.status\n  }\n}\n","/*\n  Forked from https://github.com/vercel/commerce/tree/main/packages/commerce/src\n  Changes: Replaced useSWR for useMutablePlasmicQueryData and add provider to useData\n*/\nimport { useMutablePlasmicQueryData } from \"@plasmicapp/query\";\nimport { SWRResponse } from \"swr\";\nimport { Provider } from \"../commerce\";\nimport defineProperty from \"./define-property\";\nimport { CommerceError } from \"./errors\";\nimport type {\n  Fetcher,\n  HookFetcherFn,\n  HookFetcherOptions,\n  HookFetchInput,\n  HookSWRInput,\n  SWRHookSchemaBase,\n  SwrOptions,\n} from \"./types\";\n\nexport type ResponseState<Result> = SWRResponse<Result, CommerceError> & {\n  isLoading: boolean;\n};\n\nexport type UseData = <H extends SWRHookSchemaBase>(\n  options: {\n    fetchOptions: HookFetcherOptions;\n    fetcher: HookFetcherFn<H>;\n  },\n  input: HookFetchInput | HookSWRInput,\n  fetcherFn: Fetcher,\n  swrOptions?: SwrOptions<H[\"data\"], H[\"fetcherInput\"]>,\n  provider?: Provider\n) => ResponseState<H[\"data\"]>;\n\nconst useData: UseData = (options, input, fetcherFn, swrOptions, provider) => {\n  const hookInput = Array.isArray(input) ? input : Object.entries(input);\n  const fetcher = async (\n    url: string,\n    query?: string,\n    method?: string,\n    ...args: any[]\n  ) => {\n    try {\n      return await options.fetcher({\n        options: { url, query, method },\n        // Transform the input array into an object\n        input: args.reduce((obj, val, i) => {\n          obj[hookInput[i][0]!] = val;\n          return obj;\n        }, {}),\n        fetch: fetcherFn,\n        provider\n      });\n    } catch (error) {\n      // SWR will not log errors, but any error that's not an instance\n      // of CommerceError is not welcomed by this hook\n      if (!(error instanceof CommerceError)) {\n        console.error(error);\n      }\n      throw error;\n    }\n  };\n  const response = useMutablePlasmicQueryData(\n    () => {\n      const opts = options.fetchOptions;\n      return opts\n        ? [opts.url, opts.query, opts.method, ...hookInput.map((e) => e[1])]\n        : null;\n    },\n    fetcher,\n    swrOptions\n  );\n\n  if (!(\"isLoading\" in response)) {\n    defineProperty(response, \"isLoading\", {\n      get() {\n        return response.data === undefined;\n      },\n      enumerable: true,\n    });\n  }\n\n  return response as typeof response & { isLoading: boolean };\n};\n\nexport default useData;\n","/*\n  Forked from https://github.com/vercel/commerce/tree/main/packages/commerce/src\n  Changes: Add provider to useSWRHook and useMutationHook\n*/\nimport { useCallback } from 'react'\nimport { Provider, useCommerce } from '../commerce'\nimport type { MutationHook, PickRequired, SWRHook } from './types'\nimport useData from './use-data'\n\nexport function useFetcher() {\n  const { providerRef, fetcherRef } = useCommerce()\n  return providerRef.current.fetcher ?? fetcherRef.current\n}\n\nexport function useProvider() {\n  const { providerRef } = useCommerce()\n  return providerRef.current;\n}\n\nexport function useHook<\n  P extends Provider,\n  H extends MutationHook<any> | SWRHook<any>\n>(fn: (provider: P) => H) {\n  const { providerRef } = useCommerce<P>();\n  const provider = providerRef.current\n  return fn(provider)\n}\n\nexport function useSWRHook<H extends SWRHook<any>>(\n  hook: PickRequired<H, 'fetcher'>\n) {\n  const fetcher = useFetcher()\n  const provider = useProvider()\n\n  return hook.useHook({\n    useData(ctx) {\n      const response = useData(hook, ctx?.input ?? [], fetcher, ctx?.swrOptions, provider)\n      return response\n    },\n  })\n}\n\nexport function useMutationHook<H extends MutationHook<any>>(\n  hook: PickRequired<H, 'fetcher'>\n) {\n  const fetcher = useFetcher()\n  const provider = useProvider()\n\n  return hook.useHook({\n    fetch: useCallback(\n      ({ input } = {}) => {\n        return hook.fetcher({\n          input,\n          options: hook.fetchOptions,\n          fetch: fetcher,\n          provider\n        })\n      },\n      [fetcher, hook.fetchOptions]\n    ),\n  })\n}\n","/*\n  Forked from https://github.com/vercel/commerce/tree/main/packages/commerce/src\n  Changes: None\n*/\nimport type { HookFetcherFn } from './types'\n\nexport const SWRFetcher: HookFetcherFn<any> = ({ options, fetch }) =>\n  fetch(options)\n\nexport const mutationFetcher: HookFetcherFn<any> = ({\n  input,\n  options,\n  fetch,\n}) => fetch({ ...options, body: input })\n\nexport default SWRFetcher\n","/*\n  Forked from https://github.com/vercel/commerce/tree/main/packages/commerce/src\n  Changes: None\n*/\nimport { useHook, useMutationHook } from '../utils/use-hook'\nimport { mutationFetcher } from '../utils/default-fetcher'\nimport type { HookFetcherFn, MutationHook } from '../utils/types'\nimport type { AddItemHook } from '../types/cart'\nimport type { Provider } from '../commerce'\n\nexport type UseAddItem<\n  H extends MutationHook<AddItemHook<any>> = MutationHook<AddItemHook>\n> = ReturnType<H['useHook']>\n\nconst fetcher: HookFetcherFn<AddItemHook> = mutationFetcher\n\nconst fn = (provider: Provider) => provider.cart?.useAddItem!\n\nconst useAddItem: UseAddItem = (...args) => {\n  const hook = useHook(fn)\n  return useMutationHook({ fetcher, ...hook })(...args)\n}\n\nexport default useAddItem\n","/*\n  Forked from https://github.com/vercel/commerce/tree/main/packages/commerce/src\n  Changes: None\n*/\nimport { useHook, useMutationHook } from '../utils/use-hook'\nimport { mutationFetcher } from '../utils/default-fetcher'\nimport type { HookFetcherFn, MutationHook } from '../utils/types'\nimport type { RemoveItemHook } from '../types/cart'\nimport type { Provider } from '../commerce'\n\nexport type UseRemoveItem<\n  H extends MutationHook<RemoveItemHook<any>> = MutationHook<RemoveItemHook>\n> = ReturnType<H['useHook']>\n\nconst fetcher: HookFetcherFn<RemoveItemHook> = mutationFetcher\n\nconst fn = (provider: Provider) => provider.cart?.useRemoveItem!\n\nconst useRemoveItem: UseRemoveItem = (input) => {\n  const hook = useHook(fn)\n  return useMutationHook({ fetcher, ...hook })(input)\n}\n\nexport default useRemoveItem\n","/*\n  Forked from https://github.com/vercel/commerce/tree/main/packages/commerce/src\n  Changes: None\n*/\nimport { useHook, useMutationHook } from '../utils/use-hook'\nimport { mutationFetcher } from '../utils/default-fetcher'\nimport type { HookFetcherFn, MutationHook } from '../utils/types'\nimport type { UpdateItemHook } from '../types/cart'\nimport type { Provider } from '../commerce'\n\nexport type UseUpdateItem<\n  H extends MutationHook<UpdateItemHook<any>> = MutationHook<UpdateItemHook>\n> = ReturnType<H['useHook']>\n\nconst fetcher: HookFetcherFn<UpdateItemHook> = mutationFetcher\n\nconst fn = (provider: Provider) => provider.cart?.useUpdateItem!\n\nconst useUpdateItem: UseUpdateItem = (input) => {\n  const hook = useHook(fn)\n  return useMutationHook({ fetcher, ...hook })(input)\n}\n\nexport default useUpdateItem\n","import { Product } from \"../types/product\";\nexport const defaultProduct: Product = {\n  id: \"123456789\",\n  name: \"Product name\",\n  description: \"\",\n  descriptionHtml: `\n    <p>This is a <strong>placeholder</strong>.</p>\n  `,\n  images: [\n    {\n      url: \"https://static1.plasmic.app/commerce/lightweight-jacket-0.png\",\n      alt: \"Lightweight Jacket\",\n    },\n    {\n      url: \"https://static1.plasmic.app/commerce/lightweight-jacket-1.png\",\n      alt: \"Lightweight Jacket\",\n    },\n    {\n      url: \"https://static1.plasmic.app/commerce/lightweight-jacket-2.png\",\n      alt: \"Lightweight Jacket\",\n    },\n  ],\n  variants: [\n    {\n      id: \"variant1\",\n      name: \"Variant 1\",\n      options: [],\n    },\n    {\n      id: \"variant2\",\n      name: \"Variant 2\",\n      options: [],\n    },\n  ],\n  price: {\n    value: 0,\n    currencyCode: \"USD\",\n  },\n  options: [],\n};\n","import {\n  DataProvider,\n  GlobalActionDict,\n  GlobalActionsProvider,\n  useSelector,\n} from \"@plasmicapp/host\";\nimport { GlobalActionRegistration } from \"@plasmicapp/host/registerGlobalContext\";\nimport React, { useContext } from \"react\";\nimport { FormProvider, useForm } from \"react-hook-form\";\nimport useAddItem from \"./cart/use-add-item\";\nimport useRemoveItem from \"./cart/use-remove-item\";\nimport useUpdateItem from \"./cart/use-update-item\";\nimport { Product } from \"./types/product\";\nimport { Category } from \"./types/site\";\nimport { defaultProduct } from \"./utils/default-product\";\n\nconst productSelector = \"currentProduct\";\n\nexport function ProductProvider({\n  product,\n  children,\n}: {\n  product: Product;\n  children: React.ReactNode;\n}) {\n  const methods = useForm();\n  return (\n    <DataProvider name={productSelector} data={product} key={product.id}>\n      <FormProvider {...methods}>{children}</FormProvider>\n    </DataProvider>\n  );\n}\n\nexport const useProduct = () => {\n  const product = useSelector(productSelector) as Product | undefined;\n  return product ?? defaultProduct;\n};\n\nexport const PrimaryCategoryContext = React.createContext<Category | undefined>(\n  undefined\n); //used to render correctly the defaultValueHint in ProductCollection\n\nconst categorySelector = \"currentCategory\";\n\nexport function CategoryProvider({\n  category,\n  children,\n}: {\n  category: Category;\n  children: React.ReactNode;\n}) {\n  return (\n    <DataProvider name={categorySelector} data={category} key={category.id}>\n      {children}\n    </DataProvider>\n  );\n}\n\nexport const useCategoryContext = () =>\n  useSelector(categorySelector) as Category | undefined;\nexport const usePrimaryCategory = () => useContext(PrimaryCategoryContext);\n\nconst mediaSelector = \"currentMedia\";\nexport function ProductMediaProvider({\n  mediaIndex,\n  onClick,\n  children,\n}: {\n  mediaIndex: number;\n  children: React.ReactNode;\n  onClick?: () => void;\n}) {\n  return (\n    <DataProvider name={mediaSelector} data={mediaIndex} key={mediaIndex}>\n      {React.cloneElement(React.isValidElement(children) ? children : <></>, {\n        onClick,\n      })}\n    </DataProvider>\n  );\n}\nexport const useProductMediaContext = () =>\n  useSelector(mediaSelector) as number | undefined;\n\ninterface CartActions extends GlobalActionDict {\n  addItem: (productId: string, variantId: string, quantity: number) => void;\n  updateItem: (lineItemId: string, quantity: number) => void;\n  removeItem: (lineItemId: string) => void;\n}\n\nexport function CartActionsProvider(\n  props: React.PropsWithChildren<{\n    globalContextName: string;\n  }>\n) {\n  const addItem = useAddItem();\n  const removeItem = useRemoveItem();\n  const updateItem = useUpdateItem();\n\n  const actions: CartActions = React.useMemo(\n    () => ({\n      addItem(productId, variantId, quantity) {\n        addItem({ productId, variantId, quantity });\n      },\n      updateItem(lineItemId, quantity) {\n        updateItem({ id: lineItemId, quantity });\n      },\n      removeItem(lineItemId) {\n        removeItem({ id: lineItemId });\n      },\n    }),\n    [addItem, removeItem, updateItem]\n  );\n\n  return (\n    <GlobalActionsProvider\n      contextName={props.globalContextName}\n      actions={actions}\n    >\n      {props.children}\n    </GlobalActionsProvider>\n  );\n}\n\nexport const globalActionsRegistrations: Record<\n  string,\n  GlobalActionRegistration<any>\n> = {\n  addItem: {\n    displayName: \"Add item to cart\",\n    parameters: [\n      {\n        name: \"productId\",\n        displayName: \"Product Id\",\n        type: \"string\",\n      },\n      {\n        name: \"variantId\",\n        displayName: \"Variant Id\",\n        type: \"string\",\n      },\n      {\n        name: \"quantity\",\n        displayName: \"Quantity\",\n        type: \"number\",\n      },\n    ],\n  },\n  updateItem: {\n    displayName: \"Update item in cart\",\n    parameters: [\n      {\n        name: \"lineItemId\",\n        displayName: \"Line Item Id\",\n        type: \"string\",\n      },\n      {\n        name: \"quantity\",\n        displayName: \"New Quantity\",\n        type: \"number\",\n      },\n    ],\n  },\n  removeItem: {\n    displayName: \"Remove item from cart\",\n    parameters: [\n      {\n        name: \"lineItemId\",\n        displayName: \"Line Item Id\",\n        type: \"string\",\n      },\n    ],\n  },\n};\n","import registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport React from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport useAddItem from \"./cart/use-add-item\";\nimport { useProduct } from \"./contexts\";\nimport { Registerable } from \"./registerable\";\nimport { CommerceError } from \"./utils/errors\";\n\ninterface AddToCartButtonProps {\n  children?: React.ReactNode;\n}\n\nexport const addToCartButtonMeta: ComponentMeta<AddToCartButtonProps> = {\n  name: \"plasmic-commerce-add-to-cart-button\",\n  displayName: \"Add To Cart Button\",\n  props: {\n    children: {\n      type: \"slot\",\n      defaultValue: [\n        {\n          type: \"button\",\n          value: \"Add To Cart\",\n        },\n      ],\n    },\n  },\n  importPath: \"@plasmicpkgs/commerce\",\n  importName: \"AddToCartButton\",\n};\n\nexport function AddToCartButton(props: AddToCartButtonProps) {\n  const { children } = props;\n\n  const product = useProduct();\n  const form = useFormContext();\n  const addItem = useAddItem();\n\n  const addToCart = async () => {\n    const quantity = +(form.getValues()[\"ProductQuantity\"] ?? 1);\n    if (isNaN(quantity) || quantity < 1) {\n      throw new CommerceError({\n        message: \"The item quantity has to be a valid integer greater than 0\",\n      });\n    }\n    if (product) {\n      const variantId =\n        form.getValues()[\"ProductVariant\"] ?? product.variants[0].id;\n      await addItem({\n        productId: product.id,\n        variantId: variantId,\n        quantity: quantity,\n      });\n    }\n  };\n\n  return React.isValidElement(children)\n    ? React.cloneElement(children, {\n        onClick: (e: MouseEvent) => {\n          if (\n            children.props.onClick &&\n            typeof children.props.onClick === \"function\"\n          ) {\n            children.props.onClick(e);\n          }\n          addToCart();\n        },\n      } as Partial<unknown> & React.Attributes)\n    : null;\n}\n\nexport function registerAddToCartButton(\n  loader?: Registerable,\n  customAddToCartButtonMeta?: ComponentMeta<AddToCartButtonProps>\n) {\n  const doRegisterComponent: typeof registerComponent = (...args) =>\n    loader ? loader.registerComponent(...args) : registerComponent(...args);\n  doRegisterComponent(\n    AddToCartButton,\n    customAddToCartButtonMeta ?? addToCartButtonMeta\n  );\n}\n","/*\n  Forked from https://github.com/vercel/commerce/tree/main/packages/commerce/src\n  Changes: None\n*/\nimport Cookies from 'js-cookie'\nimport { useHook, useSWRHook } from '../utils/use-hook'\nimport type { SWRHook, HookFetcherFn } from '../utils/types'\nimport type { GetCartHook } from '../types/cart'\nimport { Provider, useCommerce } from '../commerce'\n\nexport type UseCart<\n  H extends SWRHook<GetCartHook<any>> = SWRHook<GetCartHook>\n> = ReturnType<H['useHook']>\n\nconst fetcher: HookFetcherFn<GetCartHook> = async ({\n  options,\n  input: { cartId },\n  fetch,\n}) => {\n  return cartId ? await fetch(options) : null\n}\n\nconst fn = (provider: Provider) => provider.cart?.useCart!\n\nconst useCart: UseCart = (input) => {\n  const hook = useHook(fn)\n  const { cartCookie } = useCommerce()\n  const fetcherFn = hook.fetcher ?? fetcher\n  const wrapper: typeof fetcher = (context) => {\n    context.input.cartId = Cookies.get(cartCookie);\n    return fetcherFn(context)\n  }\n  return useSWRHook({ ...hook, fetcher: wrapper })(input)\n}\n\nexport default useCart\n","/*\n  Forked from https://github.com/vercel/commerce/tree/main/packages/commerce/src\n  Changes: None\n*/\nimport { useMemo } from 'react'\nimport { useCommerce } from '../commerce'\n\nexport function formatPrice({\n  amount,\n  currencyCode,\n  locale,\n}: {\n  amount: number\n  currencyCode: string\n  locale: string\n}) {\n  const formatCurrency = new Intl.NumberFormat(locale, {\n    style: 'currency',\n    currency: currencyCode,\n  })\n\n  return formatCurrency.format(amount)\n}\n\nexport function formatVariantPrice({\n  amount,\n  baseAmount,\n  currencyCode,\n  locale,\n}: {\n  baseAmount: number\n  amount: number\n  currencyCode: string\n  locale: string\n}) {\n  const hasDiscount = baseAmount > amount\n  const formatDiscount = new Intl.NumberFormat(locale, { style: 'percent' })\n  const discount = hasDiscount\n    ? formatDiscount.format((baseAmount - amount) / baseAmount)\n    : null\n\n  const price = formatPrice({ amount, currencyCode, locale })\n  const basePrice = hasDiscount\n    ? formatPrice({ amount: baseAmount, currencyCode, locale })\n    : null\n\n  return { price, basePrice, discount }\n}\n\nexport default function usePrice(\n  data?: {\n    amount: number\n    baseAmount?: number\n    currencyCode: string\n  } | null\n) {\n  const { amount, baseAmount, currencyCode } = data ?? {}\n  const { locale } = useCommerce()\n  const value = useMemo(() => {\n    if (typeof amount !== 'number' || !currencyCode) return ''\n\n    return baseAmount\n      ? formatVariantPrice({ amount, baseAmount, currencyCode, locale })\n      : formatPrice({ amount, currencyCode, locale })\n  }, [amount, baseAmount, currencyCode])\n\n  return typeof value === 'string' ? { price: value } : value\n}\n","import registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport React from \"react\";\nimport useCart from \"./cart/use-cart\";\nimport usePrice from \"./product/use-price\";\nimport { Registerable } from \"./registerable\";\n\ninterface CartProps {\n  className?: string;\n  field: string;\n  hideIfIsEmpty?: boolean;\n}\n\nexport const cartMeta: ComponentMeta<CartProps> = {\n  name: \"plasmic-commerce-cart\",\n  displayName: \"Cart\",\n  description:\n    \"Show the size or total of the cart. See Cart Provider component to access more cart data.\",\n  props: {\n    field: {\n      type: \"choice\",\n      options: [\"Size\", \"Total Price\"],\n    },\n    hideIfIsEmpty: {\n      type: \"boolean\",\n      defaultValue: false,\n      description: \"You can hide this component if the cart is empty\",\n    },\n  },\n  importPath: \"@plasmicpkgs/commerce\",\n  importName: \"CartComponent\",\n};\n\nexport function CartComponent(props: CartProps) {\n  const { className, field, hideIfIsEmpty } = props;\n\n  const { data } = useCart();\n  const { price } = usePrice({\n    amount: data?.totalPrice ?? 0,\n    currencyCode: data?.currency.code ?? \"USD\",\n  });\n  if (!field) {\n    return <p>You must set the field prop</p>;\n  }\n\n  let value;\n  if (field === \"Size\") {\n    value = data?.lineItems.length ?? 0;\n  } else if (field === \"Total Price\") {\n    value = price ?? 0;\n  }\n\n  return hideIfIsEmpty && value === 0 ? null : (\n    <span className={className}>{value}</span>\n  );\n}\n\nexport function registerCart(\n  loader?: Registerable,\n  customCartMeta?: ComponentMeta<CartProps>\n) {\n  const doRegisterComponent: typeof registerComponent = (...args) =>\n    loader ? loader.registerComponent(...args) : registerComponent(...args);\n  doRegisterComponent(CartComponent, customCartMeta ?? cartMeta);\n}\n","import registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport React, { Children } from \"react\";\nimport useCart from \"./cart/use-cart\";\nimport usePrice from \"./product/use-price\";\nimport { Registerable } from \"./registerable\";\nimport { DataProvider } from \"@plasmicapp/host\";\n\nexport const cartProviderMeta: ComponentMeta<React.PropsWithChildren<object>> =\n  {\n    name: \"plasmic-commerce-cart-provider\",\n    displayName: \"Cart Provider\",\n    description:\n      \"Use this to create bespoke cart UI. Inside Cart Provider, use dynamic values to access cart data.\",\n    props: {\n      children: \"slot\",\n    },\n    providesData: true,\n    importPath: \"@plasmicpkgs/commerce\",\n    importName: \"CartProvider\",\n  };\n\nexport function CartProvider(props: React.PropsWithChildren<object>) {\n  const { data } = useCart();\n  return (\n    <DataProvider data={data} name=\"cart\">\n      {props.children}\n    </DataProvider>\n  );\n}\n\nexport function registerCartProvider(\n  loader?: Registerable,\n  customCartProviderMeta?: ComponentMeta<React.PropsWithChildren<object>>\n) {\n  const doRegisterComponent: typeof registerComponent = (...args) =>\n    loader ? loader.registerComponent(...args) : registerComponent(...args);\n  doRegisterComponent(CartProvider, customCartProviderMeta ?? cartProviderMeta);\n}\n","import { useHook, useSWRHook } from '../utils/use-hook'\nimport { SWRFetcher } from '../utils/default-fetcher'\nimport type { SWRHook, HookFetcherFn } from '../utils/types'\nimport { Provider } from '../commerce'\nimport { GetCategoriesHook } from '../types/site'\n\nexport type UseCategories<\n  H extends SWRHook<GetCategoriesHook<any>> = SWRHook<GetCategoriesHook>\n> = ReturnType<H['useHook']>\n\nconst fetcher: HookFetcherFn<GetCategoriesHook> = SWRFetcher\n\nconst fn = (provider: Provider) => provider.site?.useCategories!;\n\nconst useCategories: UseCategories = (input) => {\n  const hook = useHook(fn)\n  return useSWRHook({ fetcher, ...hook })(input)\n}\n\nexport default useCategories\n","import {\n  DataProvider,\n  PlasmicCanvasContext,\n  repeatedElement,\n} from \"@plasmicapp/host\";\nimport registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport React from \"react\";\nimport { CategoryProvider, PrimaryCategoryContext } from \"./contexts\";\nimport { Registerable } from \"./registerable\";\nimport useCategories from \"./site/use-categories\";\nimport { Category } from \"./types/site\";\n\ninterface CategoryCollectionProps {\n  className?: string;\n  children?: React.ReactNode;\n  emptyMessage?: React.ReactNode;\n  loadingMessage?: React.ReactNode;\n  noLayout?: boolean;\n  noAutoRepeat?: boolean;\n  category?: string;\n  setControlContextData?: (data: { categories: Category[] }) => void;\n}\n\nexport const categoryCollectionMeta: ComponentMeta<CategoryCollectionProps> = {\n  name: \"plasmic-commerce-category-collection\",\n  displayName: \"Category Collection\",\n  props: {\n    children: {\n      type: \"slot\",\n      defaultValue: [\n        {\n          type: \"vbox\",\n          children: [\n            {\n              type: \"component\",\n              name: \"plasmic-commerce-category-field\",\n              props: {\n                field: \"name\",\n              },\n            },\n            {\n              type: \"component\",\n              name: \"plasmic-commerce-product-collection\",\n            },\n          ],\n          styles: {\n            width: \"100%\",\n            minWidth: 0,\n          },\n        },\n      ],\n    },\n    emptyMessage: {\n      type: \"slot\",\n      defaultValue: {\n        type: \"text\",\n        value: \"No collection found!\",\n      },\n    },\n    loadingMessage: {\n      type: \"slot\",\n      defaultValue: {\n        type: \"text\",\n        value: \"Loading...\",\n      },\n    },\n    category: {\n      type: \"choice\",\n      options: (props, ctx) => {\n        return (\n          ctx?.categories.map((category) => ({\n            label: `${\"  \".repeat(category.depth ?? 0)}${category.name}`,\n            value: category.id,\n          })) ?? []\n        );\n      },\n    },\n    noLayout: {\n      type: \"boolean\",\n      displayName: \"No layout\",\n      description: \"Do not render a container element.\",\n    },\n    noAutoRepeat: {\n      type: \"boolean\",\n      displayName: \"No auto-repeat\",\n      description: \"Do not automatically repeat children for every category.\",\n    },\n  },\n  defaultStyles: {\n    display: \"grid\",\n    gridTemplateColumns: \"1fr\",\n    gridRowGap: \"8px\",\n    padding: \"8px\",\n    maxWidth: \"100%\",\n  },\n  importPath: \"@plasmicpkgs/commerce\",\n  importName: \"CategoryCollection\",\n  providesData: true,\n};\n\nexport function CategoryCollection(props: CategoryCollectionProps) {\n  const {\n    children,\n    noLayout,\n    noAutoRepeat,\n    className,\n    loadingMessage,\n    emptyMessage,\n    category: selectedCategory,\n    setControlContextData,\n  } = props;\n\n  const inEditor = React.useContext(PlasmicCanvasContext);\n\n  const {\n    data: allCategories,\n    isLoading: isAllCategoriesLoading,\n  } = useCategories();\n\n  const { data: categories, isLoading } = useCategories({\n    categoryId: selectedCategory,\n    addIsEmptyField: !!inEditor,\n  });\n\n  if (allCategories) {\n    setControlContextData?.({\n      categories: allCategories,\n    });\n  }\n\n  const firstCategoryNotEmpty = categories?.find(\n    (category) => !category.isEmpty\n  );\n  const firstCategoryNotEmptyIndex =\n    categories?.findIndex((category) => !category.isEmpty) ?? -1;\n\n  const renderedData = noAutoRepeat\n    ? children\n    : categories?.map((category, i) => (\n        <CategoryProvider category={category} key={category.id}>\n          {repeatedElement(\n            i < firstCategoryNotEmptyIndex\n              ? i + 1\n              : i === firstCategoryNotEmptyIndex\n              ? 0\n              : i,\n            children\n          )}\n        </CategoryProvider>\n      ));\n\n  if ([isAllCategoriesLoading, isLoading].includes(true)) {\n    return React.isValidElement(loadingMessage) ? loadingMessage : null;\n  }\n\n  if (!categories || categories.length === 0) {\n    return React.isValidElement(emptyMessage) ? emptyMessage : null;\n  }\n\n  return (\n    <DataProvider name=\"categories\" data={categories}>\n      <PrimaryCategoryContext.Provider\n        value={firstCategoryNotEmpty ?? categories[0]}\n      >\n        {noLayout ? (\n          <React.Fragment>{renderedData}</React.Fragment>\n        ) : (\n          <div className={className}>{renderedData}</div>\n        )}\n      </PrimaryCategoryContext.Provider>\n    </DataProvider>\n  );\n}\n\nexport function registerCategoryCollection(\n  loader?: Registerable,\n  customCategoryCollectionMeta?: ComponentMeta<CategoryCollectionProps>\n) {\n  const doRegisterComponent: typeof registerComponent = (...args) =>\n    loader ? loader.registerComponent(...args) : registerComponent(...args);\n  doRegisterComponent(\n    CategoryCollection,\n    customCategoryCollectionMeta ?? categoryCollectionMeta\n  );\n}\n","import registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport React from \"react\";\nimport { useCategoryContext } from \"./contexts\";\nimport { Registerable } from \"./registerable\";\n\ninterface CategoryFieldProps {\n  className?: string;\n  field?: string;\n}\nexport const categoryFieldMeta: ComponentMeta<CategoryFieldProps> = {\n  name: \"plasmic-commerce-category-field\",\n  displayName: \"Category Field\",\n  props: {\n    field: {\n      type: \"choice\",\n      options: [\"id\", \"name\", \"slug\", \"path\"],\n    },\n  },\n  importPath: \"@plasmicpkgs/commerce\",\n  importName: \"CategoryField\",\n};\n\nexport function CategoryField(props: CategoryFieldProps) {\n  const { className, field } = props;\n\n  const category = useCategoryContext();\n\n  if (!field) {\n    return <span>You must set the field prop</span>;\n  }\n\n  let data = category ? (category as any)[field] : \"Category field placeholder\";\n\n  return <span className={className}>{data}</span>;\n}\n\nexport function registerCategoryField(\n  loader?: Registerable,\n  customCategoryFieldMeta?: ComponentMeta<CategoryFieldProps>\n) {\n  const doRegisterComponent: typeof registerComponent = (...args) =>\n    loader ? loader.registerComponent(...args) : registerComponent(...args);\n  doRegisterComponent(\n    CategoryField,\n    customCategoryFieldMeta ?? categoryFieldMeta\n  );\n}\n","import registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport React from \"react\";\nimport { useCategoryContext } from \"./contexts\";\nimport { Registerable } from \"./registerable\";\n\ninterface CategoryLinkProps {\n  className?: string;\n  children?: React.ReactNode;\n  linkDest?: string;\n}\n\nexport const categoryLinkMeta: ComponentMeta<CategoryLinkProps> = {\n  name: \"plasmic-commerce-category-link\",\n  displayName: \"Category Link\",\n  props: {\n    children: \"slot\",\n    linkDest: {\n      type: \"string\",\n      defaultValueHint: \"category/{slug}\",\n      description:\n        \"Set the link destination. You can use {slug} to replace by the category slug\",\n    },\n  },\n  importPath: \"@plasmicpkgs/commerce\",\n  importName: \"CategoryLink\",\n};\n\nexport function CategoryLink(props: CategoryLinkProps) {\n  const { className, children, linkDest } = props;\n\n  const category = useCategoryContext();\n\n  const resolveLink = (linkDest: string | undefined) => {\n    if (!linkDest) {\n      return undefined;\n    }\n    const regex = /{[^}]*}/;\n    const regexAll = new RegExp(regex, \"g\");\n    const matches = linkDest.match(regexAll) ?? [];\n    let resolvedLink = linkDest;\n    for (const match of matches) {\n      const field = match.slice(1, -1);\n      if (!category || !(field in category)) {\n        return undefined;\n      }\n      resolvedLink = resolvedLink.replace(regex, (category as any)[field]);\n    }\n    return resolvedLink;\n  };\n\n  return (\n    <a\n      className={className}\n      href={resolveLink(linkDest)}\n      style={{\n        color: \"inherit\",\n        textDecoration: \"inherit\",\n      }}\n    >\n      {children}\n    </a>\n  );\n}\n\nexport function registerCategoryLink(\n  loader?: Registerable,\n  customCategoryLinkMeta?: ComponentMeta<CategoryLinkProps>\n) {\n  const doRegisterComponent: typeof registerComponent = (...args) =>\n    loader ? loader.registerComponent(...args) : registerComponent(...args);\n  doRegisterComponent(CategoryLink, customCategoryLinkMeta ?? categoryLinkMeta);\n}\n","import registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport React from \"react\";\nimport { useCategoryContext } from \"./contexts\";\nimport { Registerable } from \"./registerable\";\n\ninterface CategoryMediaProps {\n  className: string;\n  mediaIndex?: number;\n}\n\nexport const categoryMediaMeta: ComponentMeta<CategoryMediaProps> = {\n  name: \"plasmic-commerce-category-media\",\n  displayName: \"Category Media\",\n  props: {\n    mediaIndex: \"number\",\n  },\n  importPath: \"@plasmicpkgs/commerce\",\n  importName: \"CategoryMedia\",\n};\n\nexport const CategoryMedia = React.forwardRef(\n  (props: CategoryMediaProps, ref: React.ForwardedRef<HTMLImageElement>) => {\n    const { className, mediaIndex = 0 } = props;\n\n    const category = useCategoryContext();\n\n    const image = category?.images ? category.images[mediaIndex] : undefined;\n    return (\n      <img\n        ref={ref}\n        alt={category?.name || \"Category Image\"}\n        src={image?.url ?? \"\"}\n        loading={\"lazy\"}\n        className={className}\n      />\n    );\n  }\n);\n\nexport function registerCategoryMedia(\n  loader?: Registerable,\n  customCategoryMediaMeta?: ComponentMeta<CategoryMediaProps>\n) {\n  const doRegisterComponent: typeof registerComponent = (...args) =>\n    loader ? loader.registerComponent(...args) : registerComponent(...args);\n  doRegisterComponent(\n    CategoryMedia,\n    customCategoryMediaMeta ?? categoryMediaMeta\n  );\n}\n","import { useHook, useSWRHook } from '../utils/use-hook'\nimport { SWRFetcher } from '../utils/default-fetcher'\nimport type { HookFetcherFn, SWRHook } from '../utils/types'\nimport type { GetProductHook, } from '../types/product'\nimport type { Provider } from '../commerce'\n\nexport type UseProduct<\n  H extends SWRHook<GetProductHook<any>> = SWRHook<GetProductHook>\n> = ReturnType<H['useHook']>\n\nconst fetcher: HookFetcherFn<GetProductHook> = SWRFetcher\n\nconst fn = (provider: Provider) => provider.products?.useProduct!\n\nconst useProduct: UseProduct = (input) => {\n  const hook = useHook(fn)\n  return useSWRHook({ fetcher, ...hook })(input)\n}\n\nexport default useProduct\n","/*\n  Forked from https://github.com/vercel/commerce/tree/main/packages/commerce/src\n  Changes: None\n*/\nimport { useHook, useSWRHook } from '../utils/use-hook'\nimport { SWRFetcher } from '../utils/default-fetcher'\nimport type { HookFetcherFn, SWRHook } from '../utils/types'\nimport type { SearchProductsHook } from '../types/product'\nimport type { Provider } from '../commerce'\n\nexport type UseSearch<\n  H extends SWRHook<SearchProductsHook<any>> = SWRHook<SearchProductsHook>\n> = ReturnType<H['useHook']>\n\nexport const fetcher: HookFetcherFn<SearchProductsHook> = SWRFetcher\n\nconst fn = (provider: Provider) => provider.products?.useSearch!\n\nconst useSearch: UseSearch = (input) => {\n  const hook = useHook(fn)\n  return useSWRHook({ fetcher, ...hook })(input)\n}\n\nexport default useSearch\n","import registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport debounce from \"debounce\";\nimport React from \"react\";\nimport { ProductProvider } from \"./contexts\";\nimport useProduct from \"./product/use-product\";\nimport useSearch from \"./product/use-search\";\nimport { Registerable } from \"./registerable\";\nimport { Product } from \"./types/product\";\nimport { CommerceError } from \"./utils/errors\";\n\ninterface ProductBoxProps {\n  className?: string;\n  children?: React.ReactNode;\n  id?: string;\n  noLayout?: boolean;\n  setControlContextData?: (data: {\n    products: Product[];\n    onSearch?: (value: string) => void;\n  }) => void;\n}\n\nexport const productBoxMeta: ComponentMeta<ProductBoxProps> = {\n  name: \"plasmic-commerce-product-box\",\n  displayName: \"Product Box\",\n  description:\n    \"Show a single product. [See commerce tutorial video](https://www.youtube.com/watch?v=1OJ_gXmta2Q)\",\n  props: {\n    children: {\n      type: \"slot\",\n      defaultValue: [\n        {\n          type: \"vbox\",\n          children: [\n            {\n              type: \"component\",\n              name: \"plasmic-commerce-product-text-field\",\n              props: {\n                field: \"name\",\n              },\n            },\n            {\n              type: \"component\",\n              name: \"plasmic-commerce-product-media\",\n            },\n          ],\n          styles: {\n            width: \"100%\",\n            minWidth: 0,\n          },\n        },\n      ],\n    },\n    noLayout: \"boolean\",\n    id: {\n      type: \"cardPicker\",\n      modalTitle: \"Product\",\n      onSearch: (props, ctx) => ctx?.onSearch,\n      showInput: true,\n      options: (props, ctx) =>\n        ctx?.products.map((product) => ({\n          imgUrl: product.images?.[0]?.url,\n          value: product.id,\n          label: product.slug ?? product.name,\n          footer: (\n            <div>\n              <div>\n                <strong>{product.name}</strong>\n              </div>\n              <div>{product.slug}</div>\n            </div>\n          ),\n        })) ?? [],\n    },\n  },\n  importPath: \"@plasmicpkgs/commerce\",\n  importName: \"ProductBox\",\n  providesData: true,\n};\n\nexport function ProductBox(props: ProductBoxProps) {\n  const { className, children, noLayout, id, setControlContextData } = props;\n\n  const [productSearch, setProductSearch] = React.useState(\"\");\n\n  const { data: allProducts } = useSearch({\n    search: productSearch !== \"\" ? productSearch : undefined,\n  });\n  const onSearch = React.useCallback(\n    debounce((value: string) => setProductSearch(value), 300),\n    []\n  );\n  if (allProducts) {\n    setControlContextData?.({\n      products: allProducts.products,\n      onSearch,\n    });\n  }\n\n  const { data, error, isLoading } = useProduct({\n    id,\n  });\n\n  if (!id) {\n    return <span>You must set the id prop</span>;\n  }\n\n  if (error) {\n    throw new CommerceError({\n      message: error.message,\n      code: error.code,\n    });\n  }\n\n  if (isLoading) {\n    return <span>Loading...</span>;\n  }\n\n  if (!data) {\n    throw new Error(\"Product not found!\");\n  }\n\n  const renderedData = (\n    <ProductProvider product={data}>{children}</ProductProvider>\n  );\n\n  return noLayout ? (\n    <React.Fragment>{renderedData}</React.Fragment>\n  ) : (\n    <div className={className}>{renderedData}</div>\n  );\n}\n\nexport function registerProductBox(\n  loader?: Registerable,\n  customProductBoxMeta?: ComponentMeta<ProductBoxProps>\n) {\n  const doRegisterComponent: typeof registerComponent = (...args) =>\n    loader ? loader.registerComponent(...args) : registerComponent(...args);\n  doRegisterComponent(ProductBox, customProductBoxMeta ?? productBoxMeta);\n}\n","import { useHook, useSWRHook } from '../utils/use-hook'\nimport { SWRFetcher } from '../utils/default-fetcher'\nimport type { SWRHook, HookFetcherFn } from '../utils/types'\nimport { Provider } from '../commerce'\nimport { GetBrandsHook } from '../types/site'\n\nexport type UseBrands<\n  H extends SWRHook<GetBrandsHook<any>> = SWRHook<GetBrandsHook>\n> = ReturnType<H['useHook']>\n\nconst fetcher: HookFetcherFn<GetBrandsHook> = SWRFetcher\n\nconst fn = (provider: Provider) => provider.site?.useBrands!;\n\nconst useBrands: UseBrands = (input) => {\n  const hook = useHook(fn)\n  return useSWRHook({ fetcher, ...hook })(input)\n}\n\nexport default useBrands\n","import { useCommerce } from \"../commerce\";\n\nexport const useCommerceExtraFeatures = () => {\n  const { providerRef } = useCommerce()\n  return providerRef.current.extraFeatures;\n}","import { DataProvider, repeatedElement } from \"@plasmicapp/host\";\nimport registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport React from \"react\";\nimport {\n  ProductProvider,\n  useCategoryContext,\n  usePrimaryCategory,\n} from \"./contexts\";\nimport useSearch from \"./product/use-search\";\nimport { Registerable } from \"./registerable\";\nimport useBrands from \"./site/use-brands\";\nimport useCategories from \"./site/use-categories\";\nimport { Product } from \"./types/product\";\nimport { Brand, Category } from \"./types/site\";\nimport { CommerceExtraFeatures } from \"./utils/types\";\nimport { useCommerceExtraFeatures } from \"./utils/use-extra-features\";\n\ninterface ProductCollectionProps {\n  className?: string;\n  children?: React.ReactNode;\n  emptyMessage?: React.ReactNode;\n  loadingMessage?: React.ReactNode;\n  count?: number;\n  category: string;\n  includeSubCategories?: boolean;\n  brand?: string;\n  noLayout?: boolean;\n  noAutoRepeat?: boolean;\n  search?: string;\n  sort?: string;\n  setControlContextData?: (data: {\n    categories: Category[];\n    brands: Brand[];\n    features?: CommerceExtraFeatures;\n    categoryCtx?: Category;\n  }) => void;\n}\n\nexport const productCollectionMeta: ComponentMeta<ProductCollectionProps> = {\n  name: \"plasmic-commerce-product-collection\",\n  displayName: \"Product Collection\",\n  description:\n    \"Show a product category. [See commerce tutorial video](https://www.youtube.com/watch?v=1OJ_gXmta2Q)\",\n  props: {\n    children: {\n      type: \"slot\",\n      defaultValue: [\n        {\n          type: \"vbox\",\n          children: [\n            {\n              type: \"component\",\n              name: \"plasmic-commerce-product-text-field\",\n              props: {\n                field: \"name\",\n              },\n            },\n            {\n              type: \"component\",\n              name: \"plasmic-commerce-product-media\",\n            },\n          ],\n          styles: {\n            width: \"100%\",\n            minWidth: 0,\n          },\n        },\n      ],\n    },\n    emptyMessage: {\n      type: \"slot\",\n      defaultValue: {\n        type: \"text\",\n        value: \"No product found!\",\n      },\n    },\n    loadingMessage: {\n      type: \"slot\",\n      defaultValue: {\n        type: \"text\",\n        value: \"Loading...\",\n      },\n    },\n    count: \"number\",\n    category: {\n      type: \"choice\",\n      options: (props, ctx) => {\n        return (\n          ctx?.categories.map((category) => ({\n            label: `${\"  \".repeat(category.depth ?? 0)}${category.name}`,\n            value: category.id,\n          })) ?? []\n        );\n      },\n      defaultValueHint: (props, ctx) => ctx?.categoryCtx?.name,\n      readOnly: (props, ctx) => !!ctx?.categoryCtx,\n    },\n    includeSubCategories: {\n      type: \"boolean\",\n      hidden: (props, ctx) => !ctx?.features?.includeSubCategories,\n    },\n    brand: {\n      type: \"choice\",\n      options: (props, ctx) => {\n        return (\n          ctx?.brands.map((brand: Brand) => ({\n            label: brand.name,\n            value: brand.entityId,\n          })) ?? []\n        );\n      },\n    },\n    search: {\n      type: \"string\",\n    },\n    sort: {\n      type: \"choice\",\n      options: [\n        {\n          label: \"Trending\",\n          value: \"trending-desc\",\n        },\n        {\n          label: \"New Arrivals\",\n          value: \"latest-desc\",\n        },\n        {\n          label: \"Price: Low to High\",\n          value: \"price-asc\",\n        },\n        {\n          label: \"Price: High to Low\",\n          value: \"price-desc\",\n        },\n      ],\n    },\n    noLayout: {\n      type: \"boolean\",\n      displayName: \"No layout\",\n      description: \"Do not render a container element.\",\n    },\n    noAutoRepeat: {\n      type: \"boolean\",\n      displayName: \"No auto-repeat\",\n      description: \"Do not automatically repeat children for every category.\",\n    },\n  },\n  defaultStyles: {\n    display: \"grid\",\n    gridTemplateColumns: \"1fr 1fr 1fr 1fr\",\n    gridRowGap: \"8px\",\n    gridColumnGap: \"8px\",\n    padding: \"8px\",\n    maxWidth: \"100%\",\n  },\n  importPath: \"@plasmicpkgs/commerce\",\n  importName: \"ProductCollection\",\n  providesData: true,\n};\n\nexport function ProductCollection(props: ProductCollectionProps) {\n  const {\n    className,\n    children,\n    count,\n    category,\n    includeSubCategories,\n    brand,\n    noLayout,\n    noAutoRepeat,\n    setControlContextData,\n    emptyMessage,\n    loadingMessage,\n    search,\n    sort,\n  } = props;\n\n  const { data: categories, isLoading: isCategoriesLoading } = useCategories();\n\n  const { data: brands, isLoading: isBrandsLoading } = useBrands();\n\n  const categoryCtx = useCategoryContext();\n\n  const { data, isLoading: isSearchLoading } = useSearch({\n    categoryId: categoryCtx?.id ?? category,\n    brandId: brand,\n    count,\n    categories: categories ?? [],\n    includeSubCategories,\n    search,\n    sort,\n  });\n\n  const features = useCommerceExtraFeatures();\n  const primaryCategory = usePrimaryCategory();\n  if (categories && brands) {\n    setControlContextData?.({\n      categories,\n      brands,\n      features,\n      categoryCtx: primaryCategory,\n    });\n  }\n\n  const renderedData = noAutoRepeat\n    ? children\n    : data?.products.map((product: Product, i: number) => (\n        <ProductProvider product={product} key={product.id}>\n          {repeatedElement(i, children)}\n        </ProductProvider>\n      ));\n\n  if ([isSearchLoading, isBrandsLoading, isCategoriesLoading].includes(true)) {\n    return React.isValidElement(loadingMessage) ? loadingMessage : null;\n  }\n\n  if (!data || data.products.length === 0) {\n    return React.isValidElement(emptyMessage) ? emptyMessage : null;\n  }\n\n  return (\n    <DataProvider name=\"products\" data={data?.products}>\n      {noLayout ? (\n        <React.Fragment>{renderedData}</React.Fragment>\n      ) : (\n        <div className={className}>{renderedData}</div>\n      )}\n    </DataProvider>\n  );\n}\n\nexport function registerProductCollection(\n  loader?: Registerable,\n  customProductCollectionMeta?: ComponentMeta<ProductCollectionProps>\n) {\n  const doRegisterComponent: typeof registerComponent = (...args) =>\n    loader ? loader.registerComponent(...args) : registerComponent(...args);\n  doRegisterComponent(\n    ProductCollection,\n    customProductCollectionMeta ?? productCollectionMeta\n  );\n}\n","import registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport React from \"react\";\nimport { useProduct } from \"./contexts\";\nimport { Registerable } from \"./registerable\";\n\ninterface ProductLinkProps {\n  className?: string;\n  children?: React.ReactNode;\n  linkDest?: string;\n}\n\nexport const productLinkMeta: ComponentMeta<ProductLinkProps> = {\n  name: \"plasmic-commerce-product-link\",\n  displayName: \"Product Link\",\n  props: {\n    children: \"slot\",\n    linkDest: {\n      type: \"string\",\n      defaultValueHint: \"products/{slug}\",\n      description:\n        \"Set the link destination. You can use {slug} to replace by the product slug\",\n    },\n  },\n  importPath: \"@plasmicpkgs/commerce\",\n  importName: \"ProductLink\",\n};\n\nexport function ProductLink(props: ProductLinkProps) {\n  const { className, children, linkDest } = props;\n\n  const product = useProduct();\n\n  const resolveLink = (linkDest: string | undefined) => {\n    if (!linkDest) {\n      return undefined;\n    }\n    const regex = /{[^}]*}/;\n    const regexAll = new RegExp(regex, \"g\");\n    const matches = linkDest.match(regexAll) ?? [];\n    let resolvedLink = linkDest;\n    for (const match of matches) {\n      const field = match.slice(1, -1);\n      if (!product || !(field in product)) {\n        return undefined;\n      }\n      resolvedLink = resolvedLink.replace(regex, (product as any)[field]);\n    }\n    return resolvedLink;\n  };\n\n  return (\n    <a\n      className={className}\n      href={resolveLink(linkDest)}\n      style={{\n        color: \"inherit\",\n        textDecoration: \"inherit\",\n      }}\n    >\n      {children}\n    </a>\n  );\n}\n\nexport function registerProductLink(\n  loader?: Registerable,\n  customProductLinkMeta?: ComponentMeta<ProductLinkProps>\n) {\n  const doRegisterComponent: typeof registerComponent = (...args) =>\n    loader ? loader.registerComponent(...args) : registerComponent(...args);\n  doRegisterComponent(ProductLink, customProductLinkMeta ?? productLinkMeta);\n}\n","import registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport React from \"react\";\nimport { useProduct, useProductMediaContext } from \"./contexts\";\nimport { Registerable } from \"./registerable\";\n\nconst placeholderImage =\n  \"https://static1.plasmic.app/commerce/lightweight-jacket-0.png\";\n\ninterface ProductMediaProps {\n  className: string;\n  mediaIndex?: number;\n  setControlContextData: (data: { inMediaContext: boolean }) => void;\n}\n\nexport const productMediaMeta: ComponentMeta<ProductMediaProps> = {\n  name: \"plasmic-commerce-product-media\",\n  displayName: \"Product Media\",\n  props: {\n    mediaIndex: {\n      type: \"number\",\n      min: 0,\n      hidden: (_, ctx) => !!ctx?.inMediaContext,\n    },\n  },\n  importPath: \"@plasmicpkgs/commerce\",\n  importName: \"ProductMedia\",\n};\n\nexport const ProductMedia = React.forwardRef(\n  (props: ProductMediaProps, ref: React.ForwardedRef<HTMLImageElement>) => {\n    const { className, mediaIndex = 0, setControlContextData } = props;\n\n    const product = useProduct();\n    const mediaContext = useProductMediaContext();\n\n    setControlContextData?.({\n      inMediaContext: mediaContext !== undefined,\n    });\n\n    const image = product?.images[mediaContext ?? mediaIndex];\n    return (\n      <img\n        ref={ref}\n        alt={product?.name || \"Product Image\"}\n        src={product ? image?.url ?? \"\" : placeholderImage}\n        loading={\"lazy\"}\n        className={className}\n      />\n    );\n  }\n);\n\nexport function registerProductMedia(\n  loader?: Registerable,\n  customProductMediaMeta?: ComponentMeta<ProductMediaProps>\n) {\n  const doRegisterComponent: typeof registerComponent = (...args) =>\n    loader ? loader.registerComponent(...args) : registerComponent(...args);\n  doRegisterComponent(ProductMedia, customProductMediaMeta ?? productMediaMeta);\n}\n","import { repeatedElement } from \"@plasmicapp/host\";\nimport registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport React from \"react\";\nimport { ProductMediaProvider, useProduct } from \"./contexts\";\nimport { Registerable } from \"./registerable\";\n\nconst placeholderImage =\n  \"https://static1.plasmic.app/commerce/lightweight-jacket-0.png\";\n\ninterface ProductMediaCollectionProps {\n  className: string;\n  media: React.ReactNode;\n}\n\nexport const productMediaCollectionMeta: ComponentMeta<ProductMediaCollectionProps> = {\n  name: \"plasmic-commerce-product-media-collection\",\n  displayName: \"Product Media Collection\",\n  props: {\n    media: {\n      type: \"slot\",\n      defaultValue: {\n        type: \"component\",\n        name: \"plasmic-commerce-product-media\",\n      },\n      allowedComponents: [\"plasmic-commerce-product-media\"],\n    },\n  },\n  defaultStyles: {\n    display: \"grid\",\n    gridTemplateColumns: \"1fr 1fr\",\n    gridRowGap: \"8px\",\n    gridColumnGap: \"8px\",\n    padding: \"8px\",\n    maxWidth: \"100%\",\n  },\n  importPath: \"@plasmicpkgs/commerce\",\n  importName: \"ProductMediaCollection\",\n  providesData: true,\n};\n\nexport function ProductMediaCollection(props: ProductMediaCollectionProps) {\n  const { media, className } = props;\n\n  const product = useProduct();\n  return (\n    <div className={className}>\n      {product?.images.map((image, i) =>\n        repeatedElement(\n          i,\n          <ProductMediaProvider mediaIndex={i} children={media} />\n        )\n      )}\n    </div>\n  );\n}\n\nexport function registerProductMediaCollection(\n  loader?: Registerable,\n  customProductMediaCollectionMeta?: ComponentMeta<ProductMediaCollectionProps>\n) {\n  const doRegisterComponent: typeof registerComponent = (...args) =>\n    loader ? loader.registerComponent(...args) : registerComponent(...args);\n  doRegisterComponent(\n    ProductMediaCollection,\n    customProductMediaCollectionMeta ?? productMediaCollectionMeta\n  );\n}\n","import { Product } from \"../types/product\";\n\nexport const getProductPrice = (product: Product, variantId: string) =>\n  product.variants.find(variant => variant.id === variantId)?.price ?? product.price.value","import registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport React from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useProduct } from \"./contexts\";\nimport usePrice from \"./product/use-price\";\nimport { Registerable } from \"./registerable\";\nimport { getProductPrice } from \"./utils/get-product-price\";\n\ninterface ProductPriceProps {\n  className: string;\n}\n\nexport const productPriceMeta: ComponentMeta<ProductPriceProps> = {\n  name: \"plasmic-commerce-product-price\",\n  displayName: \"Product Price\",\n  props: {},\n  importPath: \"@plasmicpkgs/commerce\",\n  importName: \"ProductPriceComponent\",\n};\n\nexport function ProductPriceComponent(props: ProductPriceProps) {\n  const { className } = props;\n\n  const product = useProduct();\n  const form = useFormContext();\n\n  const watchProductVariant = form?.watch(\n    \"ProductVariant\",\n    product.price ?? \"\"\n  );\n\n  const { price } = usePrice({\n    amount: product ? getProductPrice(product, watchProductVariant) : 0,\n    currencyCode: product ? product.price.currencyCode! : \"USD\",\n  });\n\n  return <span className={className}>{price}</span>;\n}\n\nexport function registerProductPrice(\n  loader?: Registerable,\n  customProductPriceMeta?: ComponentMeta<ProductPriceProps>\n) {\n  const doRegisterComponent: typeof registerComponent = (...args) =>\n    loader ? loader.registerComponent(...args) : registerComponent(...args);\n  doRegisterComponent(\n    ProductPriceComponent,\n    customProductPriceMeta ?? productPriceMeta\n  );\n}\n","import registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport React from \"react\";\nimport { Controller, useFormContext } from \"react-hook-form\";\nimport { Registerable } from \"./registerable\";\n\ninterface ProductQuantityProps {\n  className: string;\n  children?: React.ReactNode;\n}\n\nexport const productQuantityMeta: ComponentMeta<ProductQuantityProps> = {\n  name: \"plasmic-commerce-product-quantity\",\n  displayName: \"Product Quantity\",\n  props: {\n    children: {\n      type: \"slot\",\n      defaultValue: [\n        {\n          type: \"input\",\n          attrs: {\n            value: \"1\",\n          },\n        },\n      ],\n    },\n  },\n  importPath: \"@plasmicpkgs/commerce\",\n  importName: \"ProductQuantity\",\n};\n\nexport function ProductQuantity(props: ProductQuantityProps) {\n  const { className, children } = props;\n\n  const form = useFormContext();\n\n  return (\n    <div className={className}>\n      <Controller\n        name={\"ProductQuantity\"}\n        defaultValue={1}\n        control={form?.control}\n        render={({ field }) =>\n          React.isValidElement(children) ? (\n            React.cloneElement(children, {\n              ...children.props,\n              ...field,\n              name: \"ProductQuantity\",\n            })\n          ) : (\n            <></>\n          )\n        }\n      />\n    </div>\n  );\n}\n\nexport function registerProductQuantity(\n  loader?: Registerable,\n  customProductQuantityMeta?: ComponentMeta<ProductQuantityProps>\n) {\n  const doRegisterComponent: typeof registerComponent = (...args) =>\n    loader ? loader.registerComponent(...args) : registerComponent(...args);\n  doRegisterComponent(\n    ProductQuantity,\n    customProductQuantityMeta ?? productQuantityMeta\n  );\n}\n","import { repeatedElement } from \"@plasmicapp/host\";\nimport registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport React from \"react\";\nimport { ProductMediaProvider, useProduct } from \"./contexts\";\nimport { Registerable } from \"./registerable\";\n\ninterface ProductSliderProps {\n  className: string;\n  slideContainer?: React.ReactNode;\n  thumbsContainer?: React.ReactNode;\n  thumbsVisible?: number;\n  slideSelected?: number;\n}\n\nexport const productSliderMeta: ComponentMeta<ProductSliderProps> = {\n  name: \"plasmic-commerce-product-slider\",\n  displayName: \"Product Slider\",\n  providesData: true,\n  props: {\n    thumbsVisible: {\n      type: \"number\",\n      description: \"Number of thumbs visible\",\n      defaultValue: 4,\n      defaultValueHint: 4,\n    },\n    slideContainer: {\n      type: \"slot\",\n      defaultValue: {\n        type: \"vbox\",\n        children: [\n          {\n            type: \"component\",\n            name: \"plasmic-commerce-product-media\",\n          },\n        ],\n      },\n    },\n    thumbsContainer: {\n      type: \"slot\",\n      defaultValue: {\n        type: \"hbox\",\n        children: [\n          {\n            type: \"component\",\n            name: \"plasmic-commerce-product-media\",\n          },\n        ],\n      },\n    },\n    slideSelected: {\n      type: \"number\",\n      defaultValue: 0,\n      defaultValueHint: 0,\n      description: \"Current slide selected\",\n    },\n  },\n  importPath: \"@plasmicpkgs/commerce\",\n  importName: \"ProductSlider\",\n};\n\nexport function ProductSlider(props: ProductSliderProps) {\n  const {\n    className,\n    slideContainer,\n    thumbsContainer,\n    thumbsVisible = 4,\n    slideSelected = 0,\n  } = props;\n\n  const product = useProduct();\n\n  const [selected, setSelected] = React.useState<number>(slideSelected);\n\n  const maximumLeft = Math.max(0, product.images.length - thumbsVisible);\n  const leftIndex = Math.min(maximumLeft, Math.max(0, selected - 1));\n  return (\n    <div className={className}>\n      {<ProductMediaProvider mediaIndex={selected} children={slideContainer} />}\n      <div\n        style={{\n          display: \"grid\",\n          gridTemplateColumns: `repeat(${thumbsVisible}, 1fr)`,\n        }}\n      >\n        {product.images\n          .slice(leftIndex, leftIndex + thumbsVisible)\n          .map((image, i) =>\n            repeatedElement(\n              i,\n              <ProductMediaProvider\n                mediaIndex={leftIndex + i}\n                children={thumbsContainer}\n                onClick={() => setSelected(leftIndex + i)}\n              />\n            )\n          )}\n      </div>\n    </div>\n  );\n}\n\nexport function registerProductSlider(\n  loader?: Registerable,\n  customProductSliderMeta?: ComponentMeta<ProductSliderProps>\n) {\n  const doRegisterComponent: typeof registerComponent = (...args) =>\n    loader ? loader.registerComponent(...args) : registerComponent(...args);\n  doRegisterComponent(\n    ProductSlider,\n    customProductSliderMeta ?? productSliderMeta\n  );\n}\n","import registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport React from \"react\";\nimport { useProduct } from \"./contexts\";\nimport { Registerable } from \"./registerable\";\n\ninterface ProductTextFieldProps {\n  className: string;\n  field: string;\n}\n\nexport const productTextFieldMeta: ComponentMeta<ProductTextFieldProps> = {\n  name: \"plasmic-commerce-product-text-field\",\n  displayName: \"Product Text Field\",\n  props: {\n    field: {\n      type: \"choice\",\n      options: [\"id\", \"name\", \"description\", \"sku\", \"slug\", \"path\"],\n    },\n  },\n  importPath: \"@plasmicpkgs/commerce\",\n  importName: \"ProductTextField\",\n};\n\nexport function ProductTextField(props: ProductTextFieldProps) {\n  const { className, field } = props;\n\n  const product = useProduct();\n\n  if (!product) {\n    return <span className={className}>Fake Product Field</span>;\n  }\n  if (!field) {\n    return <span className={className}>Unknown Product Field</span>;\n  }\n\n  let value;\n  if (field === \"description\") {\n    return (\n      <div\n        className={className}\n        dangerouslySetInnerHTML={{\n          __html: product.descriptionHtml ?? product.description,\n        }}\n      />\n    );\n  } else {\n    value = (product as any)[field];\n  }\n  return <span className={className}>{value}</span>;\n}\n\nexport function registerTextField(\n  loader?: Registerable,\n  customProductTextFieldMeta?: ComponentMeta<ProductTextFieldProps>\n) {\n  const doRegisterComponent: typeof registerComponent = (...args) =>\n    loader ? loader.registerComponent(...args) : registerComponent(...args);\n  doRegisterComponent(\n    ProductTextField,\n    customProductTextFieldMeta ?? productTextFieldMeta\n  );\n}\n","import registerComponent, {\n  ComponentMeta,\n} from \"@plasmicapp/host/registerComponent\";\nimport React from \"react\";\nimport { Controller, useForm, useFormContext } from \"react-hook-form\";\nimport { useProduct } from \"./contexts\";\nimport { Registerable } from \"./registerable\";\n\ninterface ProductVariantPickerProps {\n  className: string;\n}\n\nexport const productVariantPickerMeta: ComponentMeta<ProductVariantPickerProps> = {\n  name: \"plasmic-commerce-product-variant-picker\",\n  displayName: \"Product Variant Picker\",\n  props: {},\n  importPath: \"@plasmicpkgs/commerce\",\n  importName: \"ProductVariantPicker\",\n};\n\nexport function ProductVariantPicker(props: ProductVariantPickerProps) {\n  const { className } = props;\n\n  const product = useProduct();\n  const form = useFormContext() ?? useForm();\n\n  return (\n    <Controller\n      name={\"ProductVariant\"}\n      control={form?.control}\n      defaultValue={\n        product?.variants.find((v) => v.price === product.price.value)?.id\n      }\n      render={({ field }) => (\n        <select className={className} {...field}>\n          {product?.variants.map((variant) => (\n            <option value={variant.id}>{variant.name}</option>\n          )) ?? <option>Product Variant Placeholder</option>}\n        </select>\n      )}\n    />\n  );\n}\n\nexport function registerProductVariantPicker(\n  loader?: Registerable,\n  customProductVariantPickerMeta?: ComponentMeta<ProductVariantPickerProps>\n) {\n  const doRegisterComponent: typeof registerComponent = (...args) =>\n    loader ? loader.registerComponent(...args) : registerComponent(...args);\n  doRegisterComponent(\n    ProductVariantPicker,\n    customProductVariantPickerMeta ?? productVariantPickerMeta\n  );\n}\n","/*\n  Forked from https://github.com/vercel/commerce/tree/main/packages/commerce/src\n  Changes: Added CategoryImage and depth/children/parent_id to Category\n*/\n\nexport type CategoryImage = {\n  url: string;\n  alt?: string;\n};\n\nexport type Category = {\n  id: string;\n  name: string;\n  slug: string;\n  path: string;\n  isEmpty?: boolean;\n  images?: CategoryImage[];\n  // available for commerce providers with category tree structure\n  depth?: number;\n  children?: string[];\n  parentId?: string;\n};\n\nexport type Brand = {\n  name: string;\n  entityId: string;\n  path: string;\n};\n\nexport type SearchSiteInfoBody = {\n  locale?: string;\n};\n\nexport type SiteTypes = {\n  category: Category;\n  brand: Brand;\n  searchBody: SearchSiteInfoBody;\n  getCategoriesBody: GetCategoriesBody;\n};\n\nexport type GetSiteInfoOperation<T extends SiteTypes = SiteTypes> = {\n  data: {\n    categories: T[\"category\"][];\n    brands: T[\"brand\"][];\n  };\n};\n\nexport type GetCategoriesBody = {\n  addIsEmptyField?: boolean;\n  categoryId?: string;\n};\n\nexport type GetCategoriesHook<T extends SiteTypes = SiteTypes> = {\n  data: T[\"category\"][];\n  input: T[\"getCategoriesBody\"];\n  fetcherInput: T[\"getCategoriesBody\"];\n  swrState: { isEmpty: boolean };\n};\n\nexport type GetBrandsHook<T extends SiteTypes = SiteTypes> = {\n  data: T[\"brand\"][] | null;\n  input: {};\n  fetcherInput: {};\n  swrState: { isEmpty: boolean };\n};\n","import { Registerable } from \"./registerable\";\nimport { registerAddToCartButton } from \"./registerAddToCartButton\";\nimport { registerCart } from \"./registerCart\";\nimport { registerCartProvider } from \"./registerCartProvider\";\nimport { registerCategoryCollection } from \"./registerCategoryCollection\";\nimport { registerCategoryField } from \"./registerCategoryField\";\nimport { registerCategoryLink } from \"./registerCategoryLink\";\nimport { registerCategoryMedia } from \"./registerCategoryMedia\";\nimport { registerProductBox } from \"./registerProductBox\";\nimport { registerProductCollection } from \"./registerProductCollection\";\nimport { registerProductLink } from \"./registerProductLink\";\nimport { registerProductMedia } from \"./registerProductMedia\";\nimport { registerProductMediaCollection } from \"./registerProductMediaCollection\";\nimport { registerProductPrice } from \"./registerProductPrice\";\nimport { registerProductQuantity } from \"./registerProductQuantity\";\nimport { registerProductSlider } from \"./registerProductSlider\";\nimport { registerTextField } from \"./registerProductTextField\";\nimport { registerProductVariantPicker } from \"./registerProductVariantPicker\";\n\nexport { CommerceAPIConfig } from \"./api/index\";\nexport * from \"./cart/use-add-item\";\nexport { default as useAddItem } from \"./cart/use-add-item\";\nexport * from \"./cart/use-cart\";\nexport { default as useCart } from \"./cart/use-cart\";\nexport * from \"./cart/use-remove-item\";\nexport { default as useRemoveItem } from \"./cart/use-remove-item\";\nexport * from \"./cart/use-update-item\";\nexport { default as useUpdateItem } from \"./cart/use-update-item\";\nexport * from \"./commerce\";\nexport * from \"./product/use-product\";\nexport { default as useProduct } from \"./product/use-product\";\nexport * from \"./product/use-search\";\nexport { default as useSearch } from \"./product/use-search\";\nexport * from \"./registerable\";\nexport * from \"./registerAddToCartButton\";\nexport * from \"./registerCart\";\nexport * from \"./registerCartProvider\";\nexport * from \"./registerCategoryCollection\";\nexport * from \"./registerCategoryField\";\nexport * from \"./registerCategoryLink\";\nexport * from \"./registerCategoryMedia\";\nexport * from \"./registerProductBox\";\nexport * from \"./registerProductCollection\";\nexport * from \"./registerProductLink\";\nexport * from \"./registerProductMedia\";\nexport * from \"./registerProductMediaCollection\";\nexport * from \"./registerProductPrice\";\nexport * from \"./registerProductQuantity\";\nexport * from \"./registerProductSlider\";\nexport * from \"./registerProductTextField\";\nexport * from \"./registerProductVariantPicker\";\nexport * from \"./site/use-brands\";\nexport { default as useBrands } from \"./site/use-brands\";\nexport * from \"./site/use-categories\";\nexport { default as useCategories } from \"./site/use-categories\";\nexport * as CartType from \"./types/cart\";\nexport * from \"./types/product\";\nexport * as ProductTypes from \"./types/product\";\nexport * as SiteTypes from \"./types/site\";\nexport { defaultProduct as ProductPlaceholder } from \"./utils/default-product\";\nexport * from \"./utils/errors\";\nexport * from \"./utils/types\";\nexport { globalActionsRegistrations, CartActionsProvider } from \"./contexts\";\n\nexport function registerAll(loader?: Registerable) {\n  registerProductCollection(loader);\n  registerTextField(loader);\n  registerProductPrice(loader);\n  registerProductMedia(loader);\n  registerProductMediaCollection(loader);\n  registerCart(loader);\n  registerCartProvider(loader);\n  registerAddToCartButton(loader);\n  registerProductQuantity(loader);\n  registerProductVariantPicker(loader);\n  registerProductBox(loader);\n  registerProductSlider(loader);\n  registerProductLink(loader);\n  registerCategoryCollection(loader);\n  registerCategoryField(loader);\n  registerCategoryLink(loader);\n  registerCategoryMedia(loader);\n}\n"],"names":["Commerce","createContext","CoreCommerceProvider","_ref","provider","children","providerRef","useRef","fetcherRef","fetcher","_providerRef$current","current","locale","cartCookie","cfg","useMemo","React","Provider","value","getCommerceProvider","CommerceProvider","_ref2","props","_objectWithoutPropertiesLoose","_excluded","_extends","useCommerce","useContext","defineProperty","obj","prop","val","Object","CommerceError","_Error","_inheritsLoose","message","code","errors","error","_this","call","_wrapNativeSuper","Error","ValidationError","_CommerceError","options","_this2","FetcherError","_CommerceError2","_this3","status","useData","input","fetcherFn","swrOptions","hookInput","Array","isArray","entries","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","query","method","_len","args","_key","_args","arguments","wrap","_callee$","_context","prev","next","length","reduce","i","fetch","abrupt","sent","t0","console","stop","_x","_x2","_x3","apply","response","useMutablePlasmicQueryData","opts","fetchOptions","concat","map","e","get","data","undefined","enumerable","useFetcher","_useCommerce","_providerRef$current$","useProvider","_useCommerce2","useHook","fn","_useCommerce3","useSWRHook","hook","ctx","_ctx$input","useMutationHook","useCallback","_temp","SWRFetcher","mutationFetcher","body","_provider$cart","cart","useAddItem","useRemoveItem","useUpdateItem","defaultProduct","id","name","description","descriptionHtml","images","alt","variants","price","currencyCode","productSelector","ProductProvider","product","methods","useForm","DataProvider","key","FormProvider","useProduct","useSelector","PrimaryCategoryContext","categorySelector","CategoryProvider","category","useCategoryContext","usePrimaryCategory","mediaSelector","ProductMediaProvider","_ref3","mediaIndex","onClick","cloneElement","isValidElement","useProductMediaContext","CartActionsProvider","addItem","removeItem","updateItem","actions","productId","variantId","quantity","lineItemId","GlobalActionsProvider","contextName","globalContextName","globalActionsRegistrations","displayName","parameters","type","addToCartButtonMeta","defaultValue","importPath","importName","AddToCartButton","form","useFormContext","addToCart","_form$getValues$Produ","_form$getValues$Produ2","getValues","isNaN","registerAddToCartButton","loader","customAddToCartButtonMeta","doRegisterComponent","registerComponent","cartId","useCart","_hook$fetcher","wrapper","context","Cookies","formatPrice","amount","formatCurrency","Intl","NumberFormat","style","currency","format","formatVariantPrice","baseAmount","hasDiscount","formatDiscount","discount","basePrice","usePrice","cartMeta","field","hideIfIsEmpty","CartComponent","className","_useCart","_usePrice","_data$totalPrice","totalPrice","_data$currency$code","_data$lineItems$lengt","lineItems","registerCart","customCartMeta","cartProviderMeta","providesData","CartProvider","registerCartProvider","customCartProviderMeta","_provider$site","site","useCategories","categoryCollectionMeta","styles","width","minWidth","emptyMessage","loadingMessage","_ctx$categories$map","categories","_category$depth","label","repeat","depth","noLayout","noAutoRepeat","defaultStyles","display","gridTemplateColumns","gridRowGap","padding","maxWidth","CategoryCollection","selectedCategory","setControlContextData","inEditor","PlasmicCanvasContext","_useCategories","allCategories","isAllCategoriesLoading","isLoading","_useCategories2","categoryId","addIsEmptyField","firstCategoryNotEmpty","find","isEmpty","firstCategoryNotEmptyIndex","_categories$findIndex","findIndex","renderedData","repeatedElement","includes","Fragment","registerCategoryCollection","customCategoryCollectionMeta","categoryFieldMeta","CategoryField","registerCategoryField","customCategoryFieldMeta","categoryLinkMeta","linkDest","defaultValueHint","CategoryLink","resolveLink","regex","regexAll","RegExp","matches","_linkDest$match","match","resolvedLink","_iterator","_createForOfIteratorHelperLoose","_step","done","slice","replace","href","color","textDecoration","registerCategoryLink","customCategoryLinkMeta","categoryMediaMeta","CategoryMedia","forwardRef","ref","_props$mediaIndex","image","src","_image$url","loading","registerCategoryMedia","customCategoryMediaMeta","_provider$products","products","useSearch","productBoxMeta","modalTitle","onSearch","showInput","_ctx$products$map","_product$images","_product$slug","imgUrl","slug","footer","ProductBox","_React$useState","useState","productSearch","setProductSearch","_useSearch","search","allProducts","debounce","_useProduct","registerProductBox","customProductBoxMeta","useBrands","useCommerceExtraFeatures","extraFeatures","productCollectionMeta","count","_ctx$categoryCtx","categoryCtx","readOnly","includeSubCategories","hidden","_ctx$features","features","brand","_ctx$brands$map","brands","entityId","sort","gridColumnGap","ProductCollection","isCategoriesLoading","_useBrands","isBrandsLoading","_categoryCtx$id","brandId","isSearchLoading","primaryCategory","registerProductCollection","customProductCollectionMeta","productLinkMeta","ProductLink","registerProductLink","customProductLinkMeta","placeholderImage","productMediaMeta","min","_","inMediaContext","ProductMedia","mediaContext","registerProductMedia","customProductMediaMeta","productMediaCollectionMeta","media","allowedComponents","ProductMediaCollection","registerProductMediaCollection","customProductMediaCollectionMeta","getProductPrice","_product$variants$fin","_product$variants$fin2","variant","productPriceMeta","ProductPriceComponent","watchProductVariant","watch","_product$price","registerProductPrice","customProductPriceMeta","productQuantityMeta","attrs","ProductQuantity","Controller","control","render","registerProductQuantity","customProductQuantityMeta","productSliderMeta","thumbsVisible","slideContainer","thumbsContainer","slideSelected","ProductSlider","_props$thumbsVisible","_props$slideSelected","selected","setSelected","maximumLeft","Math","max","leftIndex","registerProductSlider","customProductSliderMeta","productTextFieldMeta","ProductTextField","_product$descriptionH","dangerouslySetInnerHTML","__html","registerTextField","customProductTextFieldMeta","productVariantPickerMeta","ProductVariantPicker","_useFormContext","v","_product$variants$map","registerProductVariantPicker","customProductVariantPickerMeta","registerAll"],"mappings":"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"}